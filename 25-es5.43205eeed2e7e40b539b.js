!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{DiO0:function(t,r,i){"use strict";i.r(r),i.d(r,"MessageCenterModule",(function(){return K}));var a=i("ofXK"),o=i("tyNb"),c=i("CWoy"),l=i("XXKh"),s=i("wd/R"),d=i("vqVJ"),m=i("fXoL"),p=i("aceb"),u=i("sYmb"),v=function(e){return{"background-image":e}};function f(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"nb-list-item",1),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"]().goToMessageDetail(e)})),m["\u0275\u0275elementStart"](1,"div",2),m["\u0275\u0275elementStart"](2,"div",3),m["\u0275\u0275element"](3,"div",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div",5),m["\u0275\u0275elementStart"](5,"div",6),m["\u0275\u0275text"](6," From: "),m["\u0275\u0275elementStart"](7,"span"),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](9," To: "),m["\u0275\u0275elementStart"](10,"span"),m["\u0275\u0275text"](11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"div",7),m["\u0275\u0275text"](13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"div",8),m["\u0275\u0275elementStart"](15,"div"),m["\u0275\u0275text"](16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,i=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngStyle",m["\u0275\u0275pureFunction1"](5,v,"url("+r.sender.picture+")")),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](i.resolveUserEmail(r.sender)),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](i.resolveUserEmail(r.receiver)),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"](" ",r.subject," "),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate1"](" ",i.getFormatDate(r.created_at)," ")}}var g,x=((g=function(){function t(n,r,i,a){e(this,t),this.messageSerivce=n,this.route=r,this.userService=i,this.router=a}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.userService.getCurrentUser().subscribe((function(t){e.user=t,e.messageSerivce.getMessagesByUser(e.user).subscribe((function(t){e.messages=t,e.messages.sort((function(e,t){var n=s(e.created_at),r=s(t.created_at);return n.isAfter(r)?1:0}))}))}))}},{key:"isUserAdmin",value:function(e){return e.role==c.a.Admin}},{key:"resolveUserEmail",value:function(e){return e.id==this.user.id?"me":e.role==c.a.Admin?"Admin Center":e.email}},{key:"getFormatDate",value:function(e){var t=s(e);return t.isValid?t.format("LT"):""}},{key:"goToMessageDetail",value:function(e){this.router.navigate([e.id],{relativeTo:this.route})}}]),t}()).\u0275fac=function(e){return new(e||g)(m["\u0275\u0275directiveInject"](l.a),m["\u0275\u0275directiveInject"](o.a),m["\u0275\u0275directiveInject"](d.a),m["\u0275\u0275directiveInject"](o.c))},g.\u0275cmp=m["\u0275\u0275defineComponent"]({type:g,selectors:[["ngx-message-center"]],decls:7,vars:4,consts:[[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"row","justify-content-center","w-100"],[1,"avatar","ml-2"],[1,"content",3,"ngStyle"],[1,"ml-3"],[1,"text-1"],[1,"mt-2"],[1,"ml-auto"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275text"](2),m["\u0275\u0275pipe"](3,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"nb-list"),m["\u0275\u0275template"](6,f,17,7,"nb-list-item",0),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"](" ",m["\u0275\u0275pipeBind1"](3,2,"Message Center")," "),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngForOf",t.messages))},directives:[p.t,p.w,p.s,p.U,a.n,p.V,a.p],pipes:[u.c],styles:[".avatar[_ngcontent-%COMP%]{width:50px;height:50px}.avatar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;position:relative;padding-top:100%;background-size:cover;background-repeat:no-repeat;border-radius:50%;box-shadow:0 0 5px .5px #fff}nb-list-item[_ngcontent-%COMP%]   .text-1[_ngcontent-%COMP%]{font-size:small;color:grey}"]}),g),y=i("eIep"),S=i("fUYe");function b(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1,"Admin Center"),m["\u0275\u0275elementEnd"]())}function h(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2).$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](n.sender.email)}}function E(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1,"Admin Center"),m["\u0275\u0275elementEnd"]())}function C(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2).$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](n.receiver.email)}}function I(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275element"](1,"img",21),m["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("src",n,m["\u0275\u0275sanitizeUrl"])}}var w=function(e){return{"background-image":e}};function M(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",9),m["\u0275\u0275element"](1,"div",10),m["\u0275\u0275elementStart"](2,"div",11),m["\u0275\u0275elementStart"](3,"div",12),m["\u0275\u0275elementStart"](4,"div",13),m["\u0275\u0275elementStart"](5,"div",14),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](7," From: "),m["\u0275\u0275template"](8,b,2,0,"span",15),m["\u0275\u0275template"](9,h,2,1,"span",15),m["\u0275\u0275text"](10," To: "),m["\u0275\u0275template"](11,E,2,0,"span",15),m["\u0275\u0275template"](12,C,2,1,"span",15),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"div",16),m["\u0275\u0275element"](14,"div",17),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"div",18),m["\u0275\u0275elementStart"](16,"div",19),m["\u0275\u0275text"](17),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"div",20),m["\u0275\u0275template"](19,I,2,1,"ng-container",3),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]().$implicit,r=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](6),m["\u0275\u0275textInterpolate1"](" ",r.getFormatDate(n.created_at)," "),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",r.isUserAdmin(n.sender)),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!r.isUserAdmin(n.sender)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",r.isUserAdmin(n.receiver)),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!r.isUserAdmin(n.receiver)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngStyle",m["\u0275\u0275pureFunction1"](8,w,"url("+n.sender.picture+")")),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate1"](" ",n.content," "),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngForOf",n.attachedFiles)}}function k(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1,"Admin Center"),m["\u0275\u0275elementEnd"]())}function O(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2).$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](n.sender.email)}}function _(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1,"Admin Center"),m["\u0275\u0275elementEnd"]())}function j(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2).$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](n.receiver.email)}}function U(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275element"](1,"img",21),m["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("src",n,m["\u0275\u0275sanitizeUrl"])}}function F(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",9),m["\u0275\u0275elementStart"](1,"div",22),m["\u0275\u0275elementStart"](2,"div",23),m["\u0275\u0275elementStart"](3,"div",24),m["\u0275\u0275element"](4,"div",17),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"div",25),m["\u0275\u0275elementStart"](6,"div",26),m["\u0275\u0275text"](7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](8," From: "),m["\u0275\u0275template"](9,k,2,0,"span",15),m["\u0275\u0275template"](10,O,2,1,"span",15),m["\u0275\u0275text"](11," To: "),m["\u0275\u0275template"](12,_,2,0,"span",15),m["\u0275\u0275template"](13,j,2,1,"span",15),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"div",18),m["\u0275\u0275elementStart"](15,"div",27),m["\u0275\u0275text"](16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"div",28),m["\u0275\u0275template"](18,U,2,1,"ng-container",3),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]().$implicit,r=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngStyle",m["\u0275\u0275pureFunction1"](8,w,"url("+n.sender.picture+")")),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate1"](" ",r.getFormatDate(n.created_at)," "),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",r.isUserAdmin(n.sender)),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!r.isUserAdmin(n.sender)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",r.isUserAdmin(n.receiver)),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!r.isUserAdmin(n.receiver)),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate1"](" ",n.content," "),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngForOf",n.attachedFiles)}}function A(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"nb-list-item"),m["\u0275\u0275template"](1,M,20,10,"div",7),m["\u0275\u0275template"](2,F,19,10,"ng-template",null,8,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=m["\u0275\u0275reference"](3),i=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.reply_to==i.messages[0].id)("ngIfElse",r)}}function P(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",29),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().isReplyMode=!0})),m["\u0275\u0275text"](1,"Reply"),m["\u0275\u0275elementEnd"]()}}function T(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",30),m["\u0275\u0275elementStart"](1,"button",31),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().isReplyMode=!1})),m["\u0275\u0275element"](2,"nb-icon",32),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](3,"ngx-reply",33),m["\u0275\u0275elementEnd"]()}2&e&&(m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("isReplyMode",!0))}var V,$,R,z,D=((V=function(){function t(n,r,i,a){e(this,t),this.messageSerivce=n,this.route=r,this.router=i,this._location=a}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.pipe(Object(y.a)((function(t){return e.msgId=Number(t.get("id")),e.messageSerivce.getAdminHeaderMessage()}))).subscribe((function(t){e.messages=t})),this.isReplyMode=!1}},{key:"isUserAdmin",value:function(e){return e.role==c.a.Admin}},{key:"getFormatDate",value:function(e){var t=s(e);return t.isValid?t.format("LT"):""}},{key:"goToMessageCenter",value:function(){this._location.back()}}]),t}()).\u0275fac=function(e){return new(e||V)(m["\u0275\u0275directiveInject"](l.a),m["\u0275\u0275directiveInject"](o.a),m["\u0275\u0275directiveInject"](o.c),m["\u0275\u0275directiveInject"](a.k))},V.\u0275cmp=m["\u0275\u0275defineComponent"]({type:V,selectors:[["ngx-message-detail"]],decls:12,vars:3,consts:[["nbTooltip","Back","nbButton","","ghost","",3,"click"],["icon","arrow-back-outline",2,"color","white"],[2,"max-height","800px"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end"],["nbButton","","class","",3,"click",4,"ngIf"],["style","position: relative;",4,"ngIf"],["class","row w-100",4,"ngIf","ngIfElse"],["hostContent",""],[1,"row","w-100"],[1,"col-2"],[1,"col-10","justify-content-end","w-100"],[1,"row","justify-content-end"],[1,"text-1"],[1,"ml-2","date-text","text-right"],[4,"ngIf"],[1,"avatar","ml-2"],[1,"content",3,"ngStyle"],[1,"ml-3"],[1,"mt-2","mb-2","text-right"],[1,"row","attached-content","justify-content-end"],[1,"attached-img","mr-2","mt-2",3,"src"],[1,"col-10","w-100","ml-2"],[1,"row"],[1,"avatar","text-right"],[1,"text-1","ml-2"],[1,"date-text"],[1,"mt-2","mb-2"],[1,"row","attached-content"],["nbButton","",1,"",3,"click"],[2,"position","relative"],["nbButton","","ghost","",2,"position","absolute","right","0px","top","0px","z-index","99",3,"click"],["icon","close-outline"],[3,"isReplyMode"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"button",0),m["\u0275\u0275listener"]("click",(function(){return t.goToMessageCenter()})),m["\u0275\u0275elementStart"](3,"nb-icon",1),m["\u0275\u0275text"](4,"arrow-back-outline"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](5," Messages "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"nb-card-body"),m["\u0275\u0275elementStart"](7,"nb-list",2),m["\u0275\u0275template"](8,A,4,2,"nb-list-item",3),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"div",4),m["\u0275\u0275template"](10,P,2,0,"button",5),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](11,T,4,1,"div",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("ngForOf",t.messages),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",!t.isReplyMode),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.isReplyMode))},directives:[p.t,p.w,p.p,p.I,p.s,p.U,a.n,a.o,p.V,a.p,S.a],styles:[".avatar[_ngcontent-%COMP%]{width:50px;height:50px}.avatar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;position:relative;padding-top:100%;background-size:cover;background-repeat:no-repeat;border-radius:50%;box-shadow:0 0 5px .5px #fff}nb-list-item[_ngcontent-%COMP%]   .text-1[_ngcontent-%COMP%]{font-size:small;color:grey}nb-list-item[_ngcontent-%COMP%]   .date-text[_ngcontent-%COMP%]{font-size:medium}.attached-content[_ngcontent-%COMP%]{flex-wrap:wrap}.attached-content[_ngcontent-%COMP%]   .attached-img[_ngcontent-%COMP%]{max-height:70px;border-radius:5px;border:1px solid #8f9bb3}"]}),V),B=[{path:"",component:x},{path:"compose",component:($=function(){function t(n,r){e(this,t),this.userService=n,this.mssageService=r}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.userService.getCurrentUser().subscribe((function(t){e.user=t,e.from_string=e.user.email}))}},{key:"onSend",value:function(e){this.mssageService.sendMessage(this.user,e.to_contacts,e.content)}}]),t}(),$.\u0275fac=function(e){return new(e||$)(m["\u0275\u0275directiveInject"](d.a),m["\u0275\u0275directiveInject"](l.a))},$.\u0275cmp=m["\u0275\u0275defineComponent"]({type:$,selectors:[["ngx-compose-message"]],decls:1,vars:1,consts:[[3,"from_string","onsend"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"ngx-reply",0),m["\u0275\u0275listener"]("onsend",(function(e){return t.onSend(e)})),m["\u0275\u0275elementEnd"]()),2&e&&m["\u0275\u0275property"]("from_string",t.user)},directives:[S.a],styles:[""]}),$)},{path:":id",component:D}],N=((R=function t(){e(this,t)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:R}),R.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||R)},imports:[[o.g.forChild(B)],o.g]}),R),X=i("PCNd"),J=i("p0MU"),K=((z=function t(){e(this,t)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:z}),z.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||z)},imports:[[a.c,N,p.x,p.W,p.q,X.a,p.K,J.a]]}),z)}}])}();