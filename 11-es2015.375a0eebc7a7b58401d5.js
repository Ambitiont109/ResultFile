(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{xGyx:function(e,t,n){"use strict";n.r(t),n.d(t,"momentAdapterFactory",(function(){return xe})),n.d(t,"AppointmentsModule",(function(){return ye}));var a=n("ofXK"),r=n("wd/R"),i=n("tyNb"),o=n("RS3s"),l=n("CWoy"),c=n("TUgJ"),s=n("vqVJ"),d=n("fXoL"),m=n("aceb");let p=(()=>{class e{constructor(e,t,n){this.userService=e,this.router=t,this.route=n,this.parents=[],this.teachers=[],this.settings={actions:{add:!1,edit:!1,delete:!1,position:"right"},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},hideSubHeader:!0,hideHeader:!0,pager:{perPage:4},columns:{picture:{type:"custom",renderComponent:c.a}}},this.teacher_src=new o.a,this.parent_src=new o.a}ngOnInit(){this.userService.getAllUsers().subscribe(e=>{e.forEach(e=>{e.role==l.a.Parent&&this.parents.push(e),e.role==l.a.Teacher&&this.teachers.push(e)}),this.teacher_src.load(this.teachers),this.parent_src.load(this.parents)})}onRowSelect(e){this.router.navigate([e.data.id],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](s.a),d["\u0275\u0275directiveInject"](i.c),d["\u0275\u0275directiveInject"](i.a))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-appointments"]],decls:9,vars:4,consts:[["fullWidth",""],["tabTitle","Teachers"],[3,"settings","source","userRowSelect"],["tabTitle","Parents"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-tabset",0),d["\u0275\u0275elementStart"](1,"nb-tab",1),d["\u0275\u0275elementStart"](2,"nb-card"),d["\u0275\u0275elementStart"](3,"nb-card-body"),d["\u0275\u0275elementStart"](4,"ng2-smart-table",2),d["\u0275\u0275listener"]("userRowSelect",(function(e){return t.onRowSelect(e)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"nb-tab",3),d["\u0275\u0275elementStart"](6,"nb-card"),d["\u0275\u0275elementStart"](7,"nb-card-body"),d["\u0275\u0275elementStart"](8,"ng2-smart-table",2),d["\u0275\u0275listener"]("userRowSelect",(function(e){return t.onRowSelect(e)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("settings",t.settings)("source",t.teacher_src),d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("settings",t.settings)("source",t.parent_src))},directives:[m.sb,m.rb,m.u,m.t,o.b],styles:[""]}),e})();var h=n("kRoH"),v=n("7njR"),u=n("3Ksp"),g=n("eIep"),w=n("lJxs"),b=n("cp0P"),f=n("cSNu");let x=(()=>{class e{constructor(){this.locale="en",this.viewChange=new d.EventEmitter,this.viewDateChange=new d.EventEmitter,this.CalendarView=h.d}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-calendar-header"]],inputs:{view:"view",viewDate:"viewDate",locale:"locale"},outputs:{viewChange:"viewChange",viewDateChange:"viewDateChange"},decls:22,vars:16,consts:[[1,"row","text-center"],[1,"col-md-4"],[1,"btn-group"],["mwlCalendarPreviousView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],["mwlCalendarToday","",1,"btn","btn-outline-secondary",3,"viewDate","viewDateChange"],["mwlCalendarNextView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div",0),d["\u0275\u0275elementStart"](1,"div",1),d["\u0275\u0275elementStart"](2,"div",2),d["\u0275\u0275elementStart"](3,"div",3),d["\u0275\u0275listener"]("viewDateChange",(function(e){return t.viewDate=e}))("viewDateChange",(function(){return t.viewDateChange.next(t.viewDate)})),d["\u0275\u0275text"](4," Previous "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"div",4),d["\u0275\u0275listener"]("viewDateChange",(function(e){return t.viewDate=e}))("viewDateChange",(function(){return t.viewDateChange.next(t.viewDate)})),d["\u0275\u0275text"](6," Today "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](7,"div",5),d["\u0275\u0275listener"]("viewDateChange",(function(e){return t.viewDate=e}))("viewDateChange",(function(){return t.viewDateChange.next(t.viewDate)})),d["\u0275\u0275text"](8," Next "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](9,"div",1),d["\u0275\u0275elementStart"](10,"h3"),d["\u0275\u0275text"](11),d["\u0275\u0275pipe"](12,"calendarDate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](13,"div",1),d["\u0275\u0275elementStart"](14,"div",2),d["\u0275\u0275elementStart"](15,"div",6),d["\u0275\u0275listener"]("click",(function(){return t.viewChange.emit(t.CalendarView.Month)})),d["\u0275\u0275text"](16," Month "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](17,"div",6),d["\u0275\u0275listener"]("click",(function(){return t.viewChange.emit(t.CalendarView.Week)})),d["\u0275\u0275text"](18," Week "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](19,"div",6),d["\u0275\u0275listener"]("click",(function(){return t.viewChange.emit(t.CalendarView.Day)})),d["\u0275\u0275text"](20," Day "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](21,"br")),2&e&&(d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("view",t.view)("viewDate",t.viewDate),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("viewDate",t.viewDate),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("view",t.view)("viewDate",t.viewDate),d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind3"](12,12,t.viewDate,t.view+"ViewTitle",t.locale)),d["\u0275\u0275advance"](4),d["\u0275\u0275classProp"]("active",t.view===t.CalendarView.Month),d["\u0275\u0275advance"](2),d["\u0275\u0275classProp"]("active",t.view===t.CalendarView.Week),d["\u0275\u0275advance"](2),d["\u0275\u0275classProp"]("active",t.view===t.CalendarView.Day))},directives:[h.g,h.i,h.h],pipes:[h.j],styles:[""]}),e})();function y(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"mwl-calendar-month-view",8),d["\u0275\u0275listener"]("dayClicked",(function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().dayClicked(t.day)})),d["\u0275\u0275elementEnd"]()}if(2&e){const e=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("viewDate",e.viewDate)("events",e.events)("activeDayIsOpen",e.activeDayIsOpen)}}function k(e,t){if(1&e&&d["\u0275\u0275element"](0,"mwl-calendar-week-view",9),2&e){const e=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("hourSegments",3)("viewDate",e.viewDate)("events",e.events)}}function S(e,t){if(1&e&&d["\u0275\u0275element"](0,"mwl-calendar-day-view",9),2&e){const e=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("hourSegments",3)("viewDate",e.viewDate)("events",e.events)}}let C=(()=>{class e{constructor(e,t,n,a,r,i,o){this.document=e,this.appointmentService=t,this.userService=n,this.route=a,this.router=r,this.dialogService=i,this.toastrService=o,this.view=h.d.Month,this.viewDate=new Date,this.activeDayIsOpen=!0,this.darkThemeClass="dark-theme",this.actions=[{label:'<i class="fas fa-fw fa-pencil-alt"></i>',a11yLabel:"Detail",onClick:({event:e})=>{this.onDetailEvent(e)}},{label:'<i class="fas fa-fw fa-trash-alt"></i>',a11yLabel:"Delete",onClick:({event:e})=>{this.onDeleteEvent(e)}}]}ngOnInit(){this.document.body.classList.add(this.darkThemeClass),this.route.paramMap.pipe(Object(g.a)(e=>(this.userId=Number(e.get("id")),Object(b.a)({user:this.userService.getUserById(this.userId),appointments:this.appointmentService.getEventsByUserId(this.userId)}))),Object(w.a)(({user:e,appointments:t})=>(this.user=e,t.map(e=>function(e,t){return{id:e.id,start:e.start,end:e.end,title:e.title,color:u.f[e.color],actions:t,meta:e.type}}(e,this.actions))))).subscribe(e=>{this.events=e})}onDetailEvent(e){e.meta==u.b.FREE&&this.router.navigate([e.id],{relativeTo:this.route}),e.meta==u.b.PRESET&&this.router.navigate(["/appointment/preset/"+e.id])}onDeleteEvent(e){this.dialogService.open(f.a,{context:{title:"Are you sure?"}}).onClose.subscribe(t=>{1==t&&this.appointmentService.deleteEventById(e.id).subscribe(t=>{let n=this.events.findIndex(t=>t.id==e.id);this.events.splice(n,1),this.events=Object.assign([],this.events),this.toastrService.success("Deleted the Appointment","Success")})})}dayClicked({date:e,events:t}){r(e).isSame(this.viewDate,"month")&&(this.activeDayIsOpen=!(r(e).isSame(this.viewDate,"day")&&!0===this.activeDayIsOpen||0===t.length),this.viewDate=e)}back(){this.router.navigate(["/appointment"])}ngOnDestroy(){this.document.body.classList.remove(this.darkThemeClass)}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](a.d),d["\u0275\u0275directiveInject"](v.a),d["\u0275\u0275directiveInject"](s.a),d["\u0275\u0275directiveInject"](i.a),d["\u0275\u0275directiveInject"](i.c),d["\u0275\u0275directiveInject"](m.G),d["\u0275\u0275directiveInject"](m.wb))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-appointment-detail"]],decls:14,vars:11,consts:[[1,"d-flex","align-items-center"],["nbTooltip","Back","nbButton","","ghost","",3,"click"],["icon","arrow-back-outline",2,"color","white"],[3,"onlyPicture","name","picture"],[3,"view","viewDate","viewChange","viewDateChange"],[3,"ngSwitch"],[3,"viewDate","events","activeDayIsOpen","dayClicked",4,"ngSwitchCase"],[3,"hourSegments","viewDate","events",4,"ngSwitchCase"],[3,"viewDate","events","activeDayIsOpen","dayClicked"],[3,"hourSegments","viewDate","events"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-card"),d["\u0275\u0275elementStart"](1,"nb-card-header"),d["\u0275\u0275elementStart"](2,"div",0),d["\u0275\u0275elementStart"](3,"button",1),d["\u0275\u0275listener"]("click",(function(){return t.back()})),d["\u0275\u0275elementStart"](4,"nb-icon",2),d["\u0275\u0275text"](5,"arrow-back-outline"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](6,"nb-user",3),d["\u0275\u0275text"](7),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](8,"nb-card-body"),d["\u0275\u0275elementStart"](9,"ngx-calendar-header",4),d["\u0275\u0275listener"]("viewChange",(function(e){return t.view=e}))("viewDateChange",(function(e){return t.viewDate=e})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](10,"div",5),d["\u0275\u0275template"](11,y,1,3,"mwl-calendar-month-view",6),d["\u0275\u0275template"](12,k,1,3,"mwl-calendar-week-view",7),d["\u0275\u0275template"](13,S,1,3,"mwl-calendar-day-view",7),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](6),d["\u0275\u0275property"]("onlyPicture",!0)("name",(null==t.user?null:t.user.first_name)+" "+(null==t.user?null:t.user.last_name))("picture",null==t.user?null:t.user.picture),d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate2"](" ",t.user.first_name," ",t.user.last_name," "),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("view",t.view)("viewDate",t.viewDate),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitch",t.view),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","month"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","week"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","day"))},directives:[m.u,m.x,m.q,m.J,m.Bb,m.t,x,a.q,a.r,h.c,h.e,h.a],styles:['.cal-month-view .cal-header{text-align:center;font-weight:bolder}  .cal-month-view .cal-header .cal-cell{padding:5px 0;overflow:hidden;text-overflow:ellipsis;display:block;white-space:nowrap}  .cal-month-view .cal-days{border:1px solid;border-bottom:0}  .cal-month-view .cal-cell-top{min-height:78px;flex:1}  .cal-month-view .cal-cell-row{display:flex}  .cal-month-view .cal-cell{float:left;flex:1;display:flex;flex-direction:column;align-items:stretch}  .cal-month-view .cal-cell .cal-event{pointer-events:all!important}  .cal-month-view .cal-day-cell{min-height:100px}@media (-ms-high-contrast:none){  .cal-month-view .cal-day-cell{display:block}}  .cal-month-view .cal-day-cell:not(:last-child){border-right:1px solid}  .cal-month-view .cal-days .cal-cell-row{border-bottom:1px solid}  .cal-month-view .cal-day-badge{margin-top:18px;margin-left:10px;display:inline-block;min-width:10px;padding:3px 7px;font-size:12px;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:middle;border-radius:10px}  .cal-month-view .cal-day-number{font-size:1.2em;font-weight:400;opacity:.5;margin-top:15px;margin-right:15px;float:right;margin-bottom:10px}  .cal-month-view .cal-events{flex:1;align-items:flex-end;margin:3px;line-height:10px;display:flex;flex-wrap:wrap}  .cal-month-view .cal-event{width:10px;height:10px;border-radius:50%;display:inline-block;margin:2px}  .cal-month-view .cal-day-cell.cal-in-month.cal-has-events{cursor:pointer}  .cal-month-view .cal-day-cell.cal-out-month .cal-day-number{opacity:.1;cursor:default}  .cal-month-view .cal-day-cell.cal-today .cal-day-number{font-size:1.9em}  .cal-month-view .cal-open-day-events{padding:15px}  .cal-month-view .cal-open-day-events .cal-event{position:relative;top:2px}  .cal-month-view .cal-out-month .cal-day-badge,   .cal-month-view .cal-out-month .cal-event{opacity:.3}  .cal-month-view .cal-draggable{cursor:move}  .cal-month-view .cal-drag-active *{pointer-events:none}  .cal-month-view .cal-event-title{cursor:pointer}  .cal-month-view .cal-event-title:hover{text-decoration:underline}  .cal-month-view{background-color:#fff}  .cal-month-view .cal-cell-row:hover{background-color:#fafafa}  .cal-month-view .cal-cell-row .cal-cell:hover,   .cal-month-view .cal-cell.cal-has-events.cal-open{background-color:#ededed}  .cal-month-view .cal-days{border-color:#e1e1e1}  .cal-month-view .cal-day-cell:not(:last-child){border-right-color:#e1e1e1}  .cal-month-view .cal-days .cal-cell-row{border-bottom-color:#e1e1e1}  .cal-month-view .cal-day-badge{background-color:#b94a48;color:#fff}  .cal-month-view .cal-event{background-color:#1e90ff;border-color:#d1e8ff;color:#fff}  .cal-month-view .cal-day-cell.cal-weekend .cal-day-number{color:#8b0000}  .cal-month-view .cal-day-cell.cal-today{background-color:#e8fde7}  .cal-month-view .cal-day-cell.cal-drag-over{background-color:#e0e0e0!important}  .cal-month-view .cal-open-day-events{color:#fff;background-color:#555;box-shadow:inset 0 0 15px 0 rgba(0,0,0,.5)}  .cal-week-view *{box-sizing:border-box}  .cal-week-view .cal-day-headers{display:flex;padding-left:70px;border:1px solid}  .cal-week-view .cal-day-headers .cal-header{flex:1;text-align:center;padding:5px}  .cal-week-view .cal-day-headers .cal-header:not(:last-child){border-right:1px solid}  .cal-week-view .cal-day-headers .cal-header:first-child{border-left:1px solid}  .cal-week-view .cal-day-headers span{font-weight:400;opacity:.5}  .cal-week-view .cal-day-column{flex-grow:1;border-left:1px solid}  .cal-week-view .cal-event{font-size:12px;border:1px solid}  .cal-week-view .cal-time-label-column{width:70px;height:100%}  .cal-week-view .cal-current-time-marker{position:absolute;width:100%;height:2px;z-index:2}  .cal-week-view .cal-all-day-events{border-left:1px solid;border-right:1px solid;border-top:0;border-bottom:3px solid;padding-top:3px;position:relative}  .cal-week-view .cal-all-day-events .cal-day-columns{height:100%;width:100%;display:flex;position:absolute;top:0;z-index:0}  .cal-week-view .cal-all-day-events .cal-events-row{position:relative;height:31px;margin-left:70px}  .cal-week-view .cal-all-day-events .cal-event-container{display:inline-block;position:absolute}  .cal-week-view .cal-all-day-events .cal-event-container.resize-active{z-index:1;pointer-events:none}  .cal-week-view .cal-all-day-events .cal-event{padding:0 5px;margin-left:2px;margin-right:2px;height:28px;line-height:28px}  .cal-week-view .cal-all-day-events .cal-starts-within-week .cal-event{border-top-left-radius:5px;border-bottom-left-radius:5px}  .cal-week-view .cal-all-day-events .cal-ends-within-week .cal-event{border-top-right-radius:5px;border-bottom-right-radius:5px}  .cal-week-view .cal-all-day-events .cal-time-label-column{display:flex;align-items:center;justify-content:center;font-size:14px}  .cal-week-view .cal-all-day-events .cal-resize-handle{width:6px;height:100%;cursor:col-resize;position:absolute;top:0}  .cal-week-view .cal-all-day-events .cal-resize-handle.cal-resize-handle-after-end{right:0}  .cal-week-view .cal-event,   .cal-week-view .cal-header{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}  .cal-week-view .cal-drag-active{pointer-events:none;z-index:1}  .cal-week-view .cal-drag-active *{pointer-events:none}  .cal-week-view .cal-time-events{position:relative;border:1px solid;border-top:0;display:flex}  .cal-week-view .cal-time-events .cal-day-columns{display:flex;flex-grow:1}  .cal-week-view .cal-time-events .cal-day-column,   .cal-week-view .cal-time-events .cal-events-container{position:relative}  .cal-week-view .cal-time-events .cal-event-container{position:absolute;z-index:1}  .cal-week-view .cal-time-events .cal-event{width:calc(100% - 2px);height:calc(100% - 2px);margin:1px;padding:0 5px;line-height:25px}  .cal-week-view .cal-time-events .cal-resize-handle{width:100%;height:4px;cursor:row-resize;position:absolute}  .cal-week-view .cal-time-events .cal-resize-handle.cal-resize-handle-after-end{bottom:0}  .cal-week-view .cal-hour-segment{position:relative}  .cal-week-view .cal-hour-segment:after{content:"\\00a0"}  .cal-week-view .cal-event-container:not(.cal-draggable){cursor:pointer}  .cal-week-view .cal-draggable{cursor:move}  .cal-week-view .cal-hour-segment,   .cal-week-view mwl-calendar-week-view-hour-segment{display:block}  .cal-week-view .cal-hour:last-child :not(:last-child) .cal-hour-segment,   .cal-week-view .cal-hour:not(:last-child) .cal-hour-segment{border-bottom:thin dashed}  .cal-week-view .cal-time{font-weight:700;padding-top:5px;width:70px;text-align:center}  .cal-week-view .cal-hour-segment.cal-after-hour-start .cal-time{display:none}  .cal-week-view .cal-starts-within-day .cal-event{border-top-left-radius:5px;border-top-right-radius:5px}  .cal-week-view .cal-ends-within-day .cal-event{border-bottom-left-radius:5px;border-bottom-right-radius:5px}  .cal-week-view{background-color:#fff;border-top:1px solid #e1e1e1}  .cal-week-view .cal-day-headers{border-color:#e1e1e1;border-top:0}  .cal-week-view .cal-day-headers .cal-header:not(:last-child){border-right-color:#e1e1e1}  .cal-week-view .cal-day-headers .cal-header:first-child{border-left-color:#e1e1e1}  .cal-week-view .cal-day-headers .cal-drag-over,   .cal-week-view .cal-day-headers .cal-header:hover{background-color:#ededed}  .cal-week-view .cal-day-column{border-left-color:#e1e1e1}  .cal-week-view .cal-event{background-color:#d1e8ff;border-color:#1e90ff;color:#1e90ff}  .cal-week-view .cal-all-day-events{border-color:#e1e1e1}  .cal-week-view .cal-header.cal-today{background-color:#e8fde7}  .cal-week-view .cal-header.cal-weekend span{color:#8b0000}  .cal-week-view .cal-time-events{border-color:#e1e1e1}  .cal-week-view .cal-time-events .cal-day-columns:not(.cal-resize-active) .cal-hour-segment:hover{background-color:#ededed}  .cal-week-view .cal-hour-odd{background-color:#fafafa}  .cal-week-view .cal-drag-over .cal-hour-segment{background-color:#ededed}  .cal-week-view .cal-hour:last-child :not(:last-child) .cal-hour-segment,   .cal-week-view .cal-hour:not(:last-child) .cal-hour-segment{border-bottom-color:#e1e1e1}  .cal-week-view .cal-current-time-marker{background-color:#ea4334}  .cal-day-view mwl-calendar-week-view-header{display:none}  .cal-day-view .cal-events-container{margin-left:70px}  .cal-day-view .cal-day-column{border-left:0}  .cal-day-view .cal-current-time-marker{margin-left:70px;width:calc(100% - 70px)}  .cal-tooltip{position:absolute;z-index:1070;display:block;font-style:normal;font-weight:400;letter-spacing:normal;line-break:auto;line-height:1.5;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;white-space:normal;word-break:normal;word-spacing:normal;font-size:11px;word-wrap:break-word;opacity:.9}  .cal-tooltip.cal-tooltip-top{padding:5px 0;margin-top:-3px}  .cal-tooltip.cal-tooltip-top .cal-tooltip-arrow{bottom:0;left:50%;margin-left:-5px;border-width:5px 5px 0}  .cal-tooltip.cal-tooltip-right{padding:0 5px;margin-left:3px}  .cal-tooltip.cal-tooltip-right .cal-tooltip-arrow{top:50%;left:0;margin-top:-5px;border-width:5px 5px 5px 0}  .cal-tooltip.cal-tooltip-bottom{padding:5px 0;margin-top:3px}  .cal-tooltip.cal-tooltip-bottom .cal-tooltip-arrow{top:0;left:50%;margin-left:-5px;border-width:0 5px 5px}  .cal-tooltip.cal-tooltip-left{padding:0 5px;margin-left:-3px}  .cal-tooltip.cal-tooltip-left .cal-tooltip-arrow{top:50%;right:0;margin-top:-5px;border-width:5px 0 5px 5px}  .cal-tooltip-inner{max-width:200px;padding:3px 8px;text-align:center;border-radius:.25rem}  .cal-tooltip-arrow{position:absolute;width:0;height:0;border-color:transparent;border-style:solid}  .cal-tooltip.cal-tooltip-top .cal-tooltip-arrow{border-top-color:#000}  .cal-tooltip.cal-tooltip-right .cal-tooltip-arrow{border-right-color:#000}  .cal-tooltip.cal-tooltip-bottom .cal-tooltip-arrow{border-bottom-color:#000}  .cal-tooltip.cal-tooltip-left .cal-tooltip-arrow{border-left-color:#000}  .cal-tooltip-inner{color:#fff;background-color:#000}  .dark-theme{color:#d5d6d7}  .dark-theme,   .dark-theme .cal-month-view{background-color:#1f262d}  .dark-theme .cal-month-view .cal-cell-row:hover{background-color:#394046}  .dark-theme .cal-month-view .cal-cell-row .cal-cell:hover,   .dark-theme .cal-month-view .cal-cell.cal-has-events.cal-open{background-color:#2c343a}  .dark-theme .cal-month-view .cal-days{border-color:rgba(0,0,0,.6)}  .dark-theme .cal-month-view .cal-day-cell:not(:last-child){border-right-color:rgba(0,0,0,.6)}  .dark-theme .cal-month-view .cal-days .cal-cell-row{border-bottom-color:rgba(0,0,0,.6)}  .dark-theme .cal-month-view .cal-day-badge{background-color:#b94a48;color:#fff}  .dark-theme .cal-month-view .cal-event{background-color:#394046;border-color:#d1e8ff;color:#fff}  .dark-theme .cal-month-view .cal-day-cell.cal-weekend .cal-day-number{color:#cd5c5c}  .dark-theme .cal-month-view .cal-day-cell.cal-today{background-color:#394046}  .dark-theme .cal-month-view .cal-day-cell.cal-drag-over{background-color:#21272c!important}  .dark-theme .cal-month-view .cal-open-day-events{color:#fff;background-color:#394046;box-shadow:inset 0 0 15px 0 rgba(0,0,0,.5)}  .dark-theme .cal-week-view{background-color:#1f262d;border-top:1px solid rgba(0,0,0,.6)}  .dark-theme .cal-week-view .cal-day-headers{border-color:rgba(0,0,0,.6);border-top:0}  .dark-theme .cal-week-view .cal-day-headers .cal-header:not(:last-child){border-right-color:rgba(0,0,0,.6)}  .dark-theme .cal-week-view .cal-day-headers .cal-header:first-child{border-left-color:rgba(0,0,0,.6)}  .dark-theme .cal-week-view .cal-day-headers .cal-drag-over,   .dark-theme .cal-week-view .cal-day-headers .cal-header:hover{background-color:#2c343a}  .dark-theme .cal-week-view .cal-day-column{border-left-color:rgba(0,0,0,.6)}  .dark-theme .cal-week-view .cal-event{background-color:#d1e8ff;border-color:#394046;color:#394046}  .dark-theme .cal-week-view .cal-all-day-events{border-color:rgba(0,0,0,.6)}  .dark-theme .cal-week-view .cal-header.cal-today{background-color:#394046}  .dark-theme .cal-week-view .cal-header.cal-weekend span{color:#cd5c5c}  .dark-theme .cal-week-view .cal-time-events{border-color:rgba(0,0,0,.6)}  .dark-theme .cal-week-view .cal-time-events .cal-day-columns:not(.cal-resize-active) .cal-hour-segment:hover{background-color:#2c343a}  .dark-theme .cal-week-view .cal-hour-odd{background-color:#394046}  .dark-theme .cal-week-view .cal-drag-over .cal-hour-segment{background-color:#2c343a}  .dark-theme .cal-week-view .cal-hour:last-child :not(:last-child) .cal-hour-segment,   .dark-theme .cal-week-view .cal-hour:not(:last-child) .cal-hour-segment{border-bottom-color:rgba(0,0,0,.6)}  .dark-theme .cal-week-view .cal-current-time-marker{background-color:#ea4334}  .dark-theme .cal-tooltip.cal-tooltip-top .cal-tooltip-arrow{border-top-color:#000}  .dark-theme .cal-tooltip.cal-tooltip-right .cal-tooltip-arrow{border-right-color:#000}  .dark-theme .cal-tooltip.cal-tooltip-bottom .cal-tooltip-arrow{border-bottom-color:#000}  .dark-theme .cal-tooltip.cal-tooltip-left .cal-tooltip-arrow{border-left-color:#000}  .dark-theme .cal-tooltip-inner{color:#fff;background-color:#000}  .dark-theme .cal-month-view .cal-day-cell.cal-out-month .cal-day-number{opacity:.15}  .dark-theme .card{border-color:rgba(0,0,0,.6)}  .dark-theme .card-header{background-color:#394046}  .dark-theme .card-body{background-color:#1f262d}  .dark-theme .nav-tabs{border-bottom-color:rgba(0,0,0,.6)}  .dark-theme .nav-tabs .nav-link.active{background-color:#1f262d;color:#d5d6d7;border-color:rgba(0,0,0,.6)}  .dark-theme .nav-tabs .nav-link:focus,   .dark-theme .nav-tabs .nav-link:hover{border-color:rgba(0,0,0,.6)}']}),e})();var E=n("CHuZ"),I=n("3Pt+"),T=n("kiHB"),D=n("RbqP"),F=n("YUSg"),P=n("sYmb");function R(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"span",20),d["\u0275\u0275text"](1,"required"),d["\u0275\u0275elementEnd"]())}function O(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275template"](1,R,2,0,"span",19),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.appointmentForm.get("teacher").errors.required)}}function B(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"span",20),d["\u0275\u0275text"](1,"required"),d["\u0275\u0275elementEnd"]())}function j(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275template"](1,B,2,0,"span",19),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.appointmentForm.get("parent").errors.required)}}function A(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"span",20),d["\u0275\u0275text"](1,"required"),d["\u0275\u0275elementEnd"]())}function N(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275template"](1,A,2,0,"span",19),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.appointmentForm.get("title").errors.required)}}function M(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"span",20),d["\u0275\u0275text"](1,"required"),d["\u0275\u0275elementEnd"]())}function _(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275template"](1,M,2,0,"span",19),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.appointmentForm.get("start").errors.required)}}function q(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"span",20),d["\u0275\u0275text"](1,"required"),d["\u0275\u0275elementEnd"]())}function z(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"span",20),d["\u0275\u0275text"](1,"End Time is not After Start Time"),d["\u0275\u0275elementEnd"]())}function V(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275template"](1,q,2,0,"span",19),d["\u0275\u0275template"](2,z,2,0,"span",19),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.appointmentForm.get("end").errors.required),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.appointmentForm.get("end").errors.mustAfter)}}let G=(()=>{class e{constructor(e,t,n,a,r,i){this.route=e,this.router=t,this.toastrService=n,this.appointmentService=a,this.userService=r,this.fb=i,this.isInvalidControl=E.a,this.isEditmode=!0}ngOnInit(){this.userService.getAllUsers().subscribe(e=>{this.teachers=[],this.parents=[],e.forEach(e=>{e.role==l.a.Teacher&&this.teachers.push(e),e.role==l.a.Parent&&this.parents.push(e)})}),this.appointmentForm=this.fb.group({title:["",I.B.required],teacher:["",[I.B.required]],parent:["",I.B.required],start:[r().toDate(),I.B.required],end:[r().toDate(),I.B.required]},{validators:[Object(T.a)("start","end")]}),this.isEditmode&&this.route.paramMap.pipe(Object(g.a)(e=>(this.appointmentId=Number(e.get("appointment_id")),this.userId=Number(e.get("id")),this.appointmentService.getEventById(this.appointmentId)))).subscribe(e=>{this.appoinment=e,this.InitForm(e)})}InitForm(e){console.log(e),this.appointmentForm.reset(e)}onSubmit(){this.appointmentForm.markAllAsTouched(),this.appointmentForm.valid&&(this.isEditmode?(Object.assign(this.appoinment,this.appointmentForm.value),this.appointmentService.UpdateEventById(this.appoinment).subscribe(()=>{}),this.toastrService.success("Updated the Appointment Info","Success")):(this.appoinment=Object.assign({},this.appointmentForm.value),this.appoinment.type=u.b.FREE,this.appointmentService.CreateEvent(this.appoinment).subscribe(e=>{this.toastrService.success("Registered the New Appointment","Success"),this.router.navigate(["/appointment/"+this.appoinment.parent.id])})))}back(){this.router.navigate(this.userId?["/appointment/"+this.userId]:["/appointment"])}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](i.a),d["\u0275\u0275directiveInject"](i.c),d["\u0275\u0275directiveInject"](m.wb),d["\u0275\u0275directiveInject"](v.a),d["\u0275\u0275directiveInject"](s.a),d["\u0275\u0275directiveInject"](I.e))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-appointment-edit"]],inputs:{isEditmode:["editmode","isEditmode"]},decls:47,vars:22,consts:[[1,"d-flex","align-items-center"],["nbTooltip","Back","nbButton","","ghost","",3,"click"],["icon","arrow-back-outline",2,"color","white"],[1,"row","justify-content-center",3,"formGroup","ngSubmit"],[1,"col-sm-6"],[1,"form-group","row","align-items-center"],[1,"label","col-sm-3"],[1,"col-sm-9"],["formControlName","teacher",3,"users","title","disabled"],[4,"ngIf"],["formControlName","parent",3,"users","title","disabled"],[1,"form-group","row"],["nbInput","","type","text","formControlName","title",3,"status"],["nbInput","","formControlName","start",3,"owlDateTimeTrigger","owlDateTime","status"],["dt",""],["nbInput","","formControlName","end",3,"owlDateTimeTrigger","owlDateTime","status"],["dt2",""],[1,"row","justify-content-end"],["nbInput","","type","submit","value","Save"],["class","error-text",4,"ngIf"],[1,"error-text"]],template:function(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"nb-card"),d["\u0275\u0275elementStart"](1,"nb-card-header"),d["\u0275\u0275elementStart"](2,"div",0),d["\u0275\u0275elementStart"](3,"button",1),d["\u0275\u0275listener"]("click",(function(){return t.back()})),d["\u0275\u0275elementStart"](4,"nb-icon",2),d["\u0275\u0275text"](5,"arrow-back-outline"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](6," Edit Appointment "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](7,"nb-card-body"),d["\u0275\u0275elementStart"](8,"form",3),d["\u0275\u0275listener"]("ngSubmit",(function(){return t.onSubmit()})),d["\u0275\u0275elementStart"](9,"div",4),d["\u0275\u0275elementStart"](10,"div",5),d["\u0275\u0275elementStart"](11,"label",6),d["\u0275\u0275text"](12),d["\u0275\u0275pipe"](13,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](14,"div",7),d["\u0275\u0275element"](15,"ngx-user-select",8),d["\u0275\u0275template"](16,O,2,1,"div",9),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](17,"div",5),d["\u0275\u0275elementStart"](18,"label",6),d["\u0275\u0275text"](19," Parent"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](20,"div",7),d["\u0275\u0275element"](21,"ngx-user-select",10),d["\u0275\u0275template"](22,j,2,1,"div",9),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](23,"div",11),d["\u0275\u0275elementStart"](24,"label",6),d["\u0275\u0275text"](25," Title"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](26,"div",7),d["\u0275\u0275element"](27,"input",12),d["\u0275\u0275template"](28,N,2,1,"div",9),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](29,"div",11),d["\u0275\u0275elementStart"](30,"label",6),d["\u0275\u0275text"](31," Start Time"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](32,"div",7),d["\u0275\u0275element"](33,"input",13),d["\u0275\u0275template"](34,_,2,1,"div",9),d["\u0275\u0275element"](35,"owl-date-time",null,14),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](37,"div",11),d["\u0275\u0275elementStart"](38,"label",6),d["\u0275\u0275text"](39," End Time"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](40,"div",7),d["\u0275\u0275element"](41,"input",15),d["\u0275\u0275template"](42,V,3,2,"div",9),d["\u0275\u0275element"](43,"owl-date-time",null,16),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](45,"div",17),d["\u0275\u0275element"](46,"input",18),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275reference"](36),n=d["\u0275\u0275reference"](44);d["\u0275\u0275advance"](8),d["\u0275\u0275property"]("formGroup",t.appointmentForm),d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind1"](13,20,"Teacher"),""),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("users",t.teachers)("title","Select Teacher")("disabled",t.isEditmode),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.appointmentForm,"teacher")),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("users",t.parents)("title","Select Parent")("disabled",t.isEditmode),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.appointmentForm,"parent")),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("status",t.isInvalidControl(t.appointmentForm,"title")?"danger":"basic"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.appointmentForm,"title")),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("owlDateTimeTrigger",e)("owlDateTime",e)("status",t.isInvalidControl(t.appointmentForm,"start")?"danger":"basic"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.appointmentForm,"start")),d["\u0275\u0275advance"](7),d["\u0275\u0275property"]("owlDateTimeTrigger",n)("owlDateTime",n)("status",t.isInvalidControl(t.appointmentForm,"end")?"danger":"basic"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.appointmentForm,"end"))}},directives:[m.u,m.x,m.q,m.J,m.t,I.D,I.s,I.j,D.a,I.r,I.h,a.o,m.M,I.c,F.b,F.d,F.a],pipes:[P.c],styles:[".error-text[_ngcontent-%COMP%]{color:red}"]}),e})(),L=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-appointment-create"]],decls:1,vars:1,consts:[[3,"editmode"]],template:function(e,t){1&e&&d["\u0275\u0275element"](0,"ngx-appointment-edit",0),2&e&&d["\u0275\u0275property"]("editmode",!1)},directives:[G],styles:[""]}),e})();var U=n("PNcV");function $(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"button",15),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().startNew()})),d["\u0275\u0275text"](1," New "),d["\u0275\u0275elementEnd"]()}}function J(e,t){1&e&&d["\u0275\u0275element"](0,"nb-badge",16)}function H(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-toggle",17),d["\u0275\u0275listener"]("checkedChange",(function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().isStarted=t}))("checkedChange",(function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().onToogleChange(t)})),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()}if(2&e){const e=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("checked",e.isStarted),d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate"](e.actionText)}}function W(e,t){1&e&&d["\u0275\u0275element"](0,"div",18)}function K(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275elementStart"](1,"span",19),d["\u0275\u0275text"](2,"required"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]())}function X(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"button",26),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](e);const t=d["\u0275\u0275nextContext"]().$implicit;return d["\u0275\u0275nextContext"]().addTimeRangeForm(t)})),d["\u0275\u0275element"](1,"nb-icon",27),d["\u0275\u0275elementEnd"]()}}function Y(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275elementStart"](1,"span",19),d["\u0275\u0275text"](2,"required"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]())}function Z(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"span",19),d["\u0275\u0275text"](1,"required"),d["\u0275\u0275elementEnd"]())}function Q(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275template"](1,Z,2,0,"span",38),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275nextContext"]().$implicit;d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.get("startTime").errors.required)}}function ee(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"span",19),d["\u0275\u0275text"](1,"required"),d["\u0275\u0275elementEnd"]())}function te(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"span",19),d["\u0275\u0275text"](1,"End Time is not After Start Time"),d["\u0275\u0275elementEnd"]())}function ne(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275template"](1,ee,2,0,"span",38),d["\u0275\u0275template"](2,te,2,0,"span",38),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275nextContext"]().$implicit;d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.get("endTime").errors.required),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.get("endTime").errors.mustAfter)}}function ae(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"button",39),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](e);const t=d["\u0275\u0275nextContext"]().index,n=d["\u0275\u0275nextContext"]().$implicit;return d["\u0275\u0275nextContext"]().removeTimeRangeForm(n,t)})),d["\u0275\u0275element"](1,"nb-icon",40),d["\u0275\u0275elementEnd"]()}}function re(e,t){if(1&e&&(d["\u0275\u0275elementContainerStart"](0,28),d["\u0275\u0275elementStart"](1,"div",29),d["\u0275\u0275elementStart"](2,"div",7),d["\u0275\u0275elementStart"](3,"label",30),d["\u0275\u0275text"](4," Date "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"div"),d["\u0275\u0275element"](6,"input",31),d["\u0275\u0275template"](7,Y,3,0,"div",10),d["\u0275\u0275element"](8,"owl-date-time",11,32),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](10,"div",7),d["\u0275\u0275elementStart"](11,"label",30),d["\u0275\u0275text"](12," Start Time"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](13,"div"),d["\u0275\u0275element"](14,"input",33),d["\u0275\u0275template"](15,Q,2,1,"div",10),d["\u0275\u0275element"](16,"owl-date-time",11,34),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](18,"div",7),d["\u0275\u0275elementStart"](19,"label",30),d["\u0275\u0275text"](20," End Time"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](21,"div"),d["\u0275\u0275element"](22,"input",35),d["\u0275\u0275template"](23,ne,3,2,"div",10),d["\u0275\u0275element"](24,"owl-date-time",11,36),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](26,ae,2,0,"button",37),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=t.index,a=d["\u0275\u0275reference"](9),r=d["\u0275\u0275reference"](17),i=d["\u0275\u0275reference"](25),o=d["\u0275\u0275nextContext"](2);d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("formGroupName",n),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("owlDateTimeTrigger",a)("owlDateTime",a),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",o.isInvalidControl(e,"date")),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("pickerType","calendar"),d["\u0275\u0275advance"](6),d["\u0275\u0275property"]("owlDateTimeTrigger",r)("owlDateTime",r)("status",o.isInvalidControl(e,"startTime")?"danger":"basic"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",o.isInvalidControl(e,"startTime")),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("pickerType","timer"),d["\u0275\u0275advance"](6),d["\u0275\u0275property"]("owlDateTimeTrigger",i)("owlDateTime",i)("status",o.isInvalidControl(e,"endTime")?"danger":"basic"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",o.isInvalidControl(e,"endTime")),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("pickerType","timer"),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",!o.isFinished)}}function ie(e,t){if(1&e&&(d["\u0275\u0275elementContainerStart"](0,20),d["\u0275\u0275elementStart"](1,"div",21),d["\u0275\u0275elementStart"](2,"nb-card"),d["\u0275\u0275elementStart"](3,"nb-card-header"),d["\u0275\u0275text"](4),d["\u0275\u0275pipe"](5,"translate"),d["\u0275\u0275template"](6,X,2,0,"button",22),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](7,"nb-card-body"),d["\u0275\u0275template"](8,re,27,16,"ng-container",23),d["\u0275\u0275elementStart"](9,"div",7),d["\u0275\u0275elementStart"](10,"label",8),d["\u0275\u0275text"](11," Duration"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](12,"nb-select",24),d["\u0275\u0275elementStart"](13,"nb-option",25),d["\u0275\u0275text"](14,"10"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](15,"nb-option",25),d["\u0275\u0275text"](16,"15"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](17,"nb-option",25),d["\u0275\u0275text"](18,"20"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](19,"nb-option",25),d["\u0275\u0275text"](20,"30"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](21,"nb-option",25),d["\u0275\u0275text"](22,"40"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](23,"nb-option",25),d["\u0275\u0275text"](24,"50"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](25,"nb-option",25),d["\u0275\u0275text"](26,"60"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](27," minutes "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=t.index,a=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("formGroupName",n),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind1"](5,12,e.get("classroom").value)," "),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",!a.isFinished),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngForOf",e.get("timeranges").controls),d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("status",a.isInvalidControl(e,"duration")?"danger":"basic"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("value",10),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("value",15),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("value",20),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("value",30),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("value",40),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("value",50),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("value",60)}}function oe(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-card-footer"),d["\u0275\u0275elementStart"](1,"button",41),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().updateSubmit()})),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275text"](3),d["\u0275\u0275pipe"](4,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275propertyInterpolate"]("nbTooltip",d["\u0275\u0275pipeBind1"](2,2,"Update Current Preset Info")),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind1"](4,4,"Update")," "))}let le=(()=>{class e{constructor(e,t,n,a){this.dialogService=e,this.childService=t,this.appointmentService=n,this.fb=a,this.isInvalidControl=E.a,this.isStarted=!1,this.isFinished=!1,this.isNewStarted=!1,this.actionText="START"}ngOnInit(){this.presetRecordForm=this.fb.group({closeDateTime:["",I.B.required],presetItems:this.fb.array(this.childService.classNameList.map(e=>this._buildPresetItemForm(e)))}),console.log(this.presetRecordForm),this.appointmentService.GetCurrentPresetRecord().subscribe(e=>{console.log(e),this.currentPresetRecord=e,this.presetRecordForm.reset(e),e.status==u.d.Started&&(this.isStarted=!0),e.status==u.d.Closed&&(this.isFinished=!0),this._setActionText()}),console.log(this.presetRecordForm)}onToogleChange(e){this.isStarted=e,1==e&&(this.onSubmit(),this.presetRecordForm.invalid&&setTimeout(e=>{this.isStarted=!1},100)),0==e&&this.dialogService.open(f.a,{context:{title:"Are you going to close?"}}).onClose.subscribe(e=>{0==e?(this.isStarted=!0,this.actionText="CLOSE"):this.appointmentService.CloseCurrentPreset(this.currentPresetRecord.id).subscribe(e=>{this.isFinished=!0})}),this._setActionText()}_buildPresetItemForm(e,t){let n=this.fb.group({classroom:[e],timeranges:this.fb.array([1,1,1].map(e=>this._buildTimeRangeForm()),I.B.minLength(3)),duration:[20,I.B.required]});return t&&n.reset(t),n}_buildTimeRangeForm(e){let t=this.fb.group({startTime:["",I.B.required],endTime:["",I.B.required],date:["",I.B.required]},{validators:[Object(T.a)("startTime","endTime")]});return e&&t.reset(e),t}get presetItemForms(){return this.presetRecordForm.get("presetItems")}_setActionText(){this.actionText=1==this.isStarted?"CLOSE":"START"}updateSubmit(){this.onSubmit()}onSubmit(){if(this.presetRecordForm.markAllAsTouched(),this.presetRecordForm.valid){let e=Object.assign({},this.presetRecordForm.value);this.appointmentService.StartNewPreset(e).subscribe(e=>{}),this.isStarted&&this.appointmentService.UpdatePresetRecord(e).subscribe(e=>{})}}addTimeRangeForm(e){e.get("timeranges").push(this._buildTimeRangeForm())}removeTimeRangeForm(e,t){this.dialogService.open(f.a,{context:{title:"Are you sure?"}}).onClose.subscribe(n=>{1==n&&e.get("timeranges").removeAt(t)})}startNew(){this.isNewStarted=!0,this.isFinished=!1,this.isStarted=!1}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](m.G),d["\u0275\u0275directiveInject"](U.a),d["\u0275\u0275directiveInject"](v.a),d["\u0275\u0275directiveInject"](I.e))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-preset"]],decls:20,vars:11,consts:[[1,"d-flex","align-items-center",2,"position","relative"],["class","ml-2","type","button","nbTooltip","Start New","nbButton","","ghost","",3,"click",4,"ngIf"],["text","Finished","status","danger","position","top right",4,"ngIf"],["class","ml-auto","status","basic","labelPosition","start",3,"checked","checkedChange",4,"ngIf"],[2,"position","relative"],["class","disable-form",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"label","mr-4"],["nbInput","","formControlName","closeDateTime",2,"width","120px",3,"owlDateTimeTrigger","owlDateTime"],[4,"ngIf"],[3,"pickerType"],["closedate",""],[1,"row"],["formArrayName","presetItems",4,"ngFor","ngForOf"],["type","button","nbTooltip","Start New","nbButton","","ghost","",1,"ml-2",3,"click"],["text","Finished","status","danger","position","top right"],["status","basic","labelPosition","start",1,"ml-auto",3,"checked","checkedChange"],[1,"disable-form"],[1,"error-text"],["formArrayName","presetItems"],[1,"col-md-6",3,"formGroupName"],["type","button","nbTooltip","Add Date","nbButton","","ghost","",3,"click",4,"ngIf"],["formArrayName","timeranges",4,"ngFor","ngForOf"],["formControlName","duration",3,"status"],[3,"value"],["type","button","nbTooltip","Add Date","nbButton","","ghost","",3,"click"],["icon","plus-outline",2,"color","white"],["formArrayName","timeranges"],[1,"row","justify-content-around",2,"position","relative",3,"formGroupName"],[1,"label"],["nbInput","","formControlName","date",2,"width","120px",3,"owlDateTimeTrigger","owlDateTime"],["dt3",""],["disabled","","nbInput","","formControlName","startTime",2,"width","120px",3,"owlDateTimeTrigger","owlDateTime","status"],["dt",""],["nbInput","","formControlName","endTime",2,"width","120px",3,"owlDateTimeTrigger","owlDateTime","status"],["dt2",""],["type","button","nbButton","","ghost","","style","position: absolute;right: 0px; top: -5px;z-index:99;",3,"click",4,"ngIf"],["class","error-text",4,"ngIf"],["type","button","nbButton","","ghost","",2,"position","absolute","right","0px","top","-5px","z-index","99",3,"click"],["icon","close-outline"],["type","button","nbButton","","ghost","",2,"float","right",3,"nbTooltip","click"]],template:function(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"nb-card"),d["\u0275\u0275elementStart"](1,"nb-card-header"),d["\u0275\u0275elementStart"](2,"div",0),d["\u0275\u0275text"](3," Preset "),d["\u0275\u0275template"](4,$,2,0,"button",1),d["\u0275\u0275template"](5,J,1,0,"nb-badge",2),d["\u0275\u0275template"](6,H,2,2,"nb-toggle",3),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](7,"nb-card-body",4),d["\u0275\u0275template"](8,W,1,0,"div",5),d["\u0275\u0275elementStart"](9,"form",6),d["\u0275\u0275listener"]("ngSubmit",(function(){return t.onSubmit()})),d["\u0275\u0275elementStart"](10,"div",7),d["\u0275\u0275elementStart"](11,"label",8),d["\u0275\u0275text"](12," Close Date "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](13,"input",9),d["\u0275\u0275template"](14,K,3,0,"div",10),d["\u0275\u0275element"](15,"owl-date-time",11,12),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](17,"div",13),d["\u0275\u0275template"](18,ie,28,14,"ng-container",14),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](19,oe,5,6,"nb-card-footer",10),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275reference"](16);d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("ngIf",t.isFinished),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.isFinished),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",!t.isFinished),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",t.isFinished),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("formGroup",t.presetRecordForm),d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("owlDateTimeTrigger",e)("owlDateTime",e),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.presetRecordForm,"closeDateTime")),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("pickerType","calendar"),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngForOf",t.presetItemForms.controls),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.isStarted)}},directives:[m.u,m.x,a.o,m.t,I.D,I.s,I.j,m.M,I.c,F.b,I.r,I.h,F.d,F.a,a.n,m.q,m.o,m.xb,I.d,I.k,m.gb,m.cb,m.J,m.v],pipes:[P.c],styles:[".error-text[_ngcontent-%COMP%]{color:red}.disable-form[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;z-index:999;background:rgba(55,57,62,.16)}"]}),e})();var ce=n("xgyk");let se=(()=>{class e{constructor(e){this._eref=e,this.confirmClick=new d.EventEmitter,this.moment=r,this.isflipped=!1,this.isConfirmed=!1}get formateTime(){return r(this.start).format("LT")}ngOnInit(){}onClick(e){this._eref.nativeElement.contains(e.target)||(this.isflipped=!1)}onConfirm(){this.confirmClick.emit({start:this.start,end:this.end})}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](d.ElementRef))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-preset-slot-item"]],hostBindings:function(e,t){1&e&&d["\u0275\u0275listener"]("click",(function(e){return t.onClick(e)}),!1,d["\u0275\u0275resolveDocument"])},inputs:{start:"start",end:"end",isConfirmed:["confirmed","isConfirmed"]},outputs:{confirmClick:"confirmClick"},decls:13,vars:6,consts:[[3,"showToggleButton","flipped"],["nbButton","","status","primary",3,"disabled","click"],[2,"position","relative"],[1,"small-text"],["nbButton","","status","success",3,"disabled","click"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-flip-card",0),d["\u0275\u0275elementStart"](1,"nb-card-front"),d["\u0275\u0275elementStart"](2,"nb-card"),d["\u0275\u0275elementStart"](3,"nb-card-body"),d["\u0275\u0275elementStart"](4,"button",1),d["\u0275\u0275listener"]("click",(function(){return t.isflipped=!t.isflipped})),d["\u0275\u0275text"](5),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](6,"nb-card-back"),d["\u0275\u0275elementStart"](7,"nb-card"),d["\u0275\u0275elementStart"](8,"nb-card-body",2),d["\u0275\u0275elementStart"](9,"div",3),d["\u0275\u0275text"](10),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](11,"button",4),d["\u0275\u0275listener"]("click",(function(){return t.onConfirm()})),d["\u0275\u0275text"](12," Confirm "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275property"]("showToggleButton",!1)("flipped",t.isflipped),d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("disabled",t.isConfirmed),d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",t.formateTime," "),d["\u0275\u0275advance"](5),d["\u0275\u0275textInterpolate1"](" ",t.formateTime," "),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("disabled",t.isConfirmed))},directives:[m.H,m.w,m.u,m.t,m.q,m.s],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px}[_nghost-%COMP%]   nb-flip-card[_ngcontent-%COMP%]{margin-bottom:5px;margin-right:5px;width:100px}[_nghost-%COMP%]   .small-text[_ngcontent-%COMP%]{position:absolute;top:-1px;left:2px;font-size:xx-small;font-weight:700;color:#0555e0}"]}),e})();function de(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"nb-option",9),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"titlecase"),d["\u0275\u0275pipe"](3,"translate"),d["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;d["\u0275\u0275property"]("value",e),d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind1"](2,2,d["\u0275\u0275pipeBind1"](3,4,e))," ")}}function me(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"nb-option",9),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"date"),d["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;d["\u0275\u0275property"]("value",e),d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind1"](2,2,e.date)," ")}}function pe(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementContainerStart"](0),d["\u0275\u0275elementStart"](1,"ngx-preset-slot-item",10),d["\u0275\u0275listener"]("confirmClick",(function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().onConfirm(t)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.$implicit;d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("start",e.start)("end",e.end)("confirmed",e.booked)}}let he=(()=>{class e{constructor(e,t,n,a,r,i,o){this.route=e,this.childService=t,this.appointmentService=n,this.dialogService=a,this.toastrService=r,this.router=i,this.userService=o,this.ToddlerType=u.e.Toddler,this.KindergartenType=u.e.Kindergarten,this.isEditmode=!0}ngOnInit(){this.appointmentService.GetCurrentPresetRecord().subscribe(e=>{this.currentPresetRecord=e}),this.classNameList=this.childService.classNameList,this.selectedClassroom=this.childService.getCurrentClassName(),this.isEditmode?this.route.paramMap.pipe(Object(g.a)(e=>(this.appointmentId=Number(e.get("appointment_id")),this.selectedClassroom=e.get("classroom"),Object(b.a)({currentPreset:this.appointmentService.GetCurrentPresetRecord(),children:this.childService.getAllChildren(),presetAppointments:this.appointmentService.GetPresetAppointmentByClassroom(this.selectedClassroom)})))).subscribe(e=>{this.currentPresetRecord=e.currentPreset,this.appoinment=e.presetAppointments.find(e=>e.id==this.appointmentId),this.appoinment&&(this.selectedTimeRange=this.appoinment.timerange,this.apnts=e.presetAppointments,this.GenerateSlotsInfo(e.presetAppointments))}):Object(b.a)({currentPreset:this.appointmentService.GetCurrentPresetRecord(),presetAppointments:this.appointmentService.GetPresetAppointmentByClassroom(this.selectedClassroom),children:this.childService.getAllChildren()}).subscribe(e=>{this.currentPresetRecord=e.currentPreset,this.dates=this.currentPresetRecord.presetItems.find(e=>e.classroom==this.selectedClassroom).timeranges,this.selectedTimeRange=this.dates[0],this.childs=e.children,this.apnts=e.presetAppointments,this.GenerateSlotsInfo(this.apnts)})}_generateslotsInfo(e,t){let n={},a=this.currentPresetRecord.presetItems.find(e=>e.classroom==t),i=a.duration;return a?(a.timeranges.forEach(t=>{n[t.id]=[];let a=r(t.startTime),o=r(t.endTime);for(let l=a.clone();l.isBefore(o,"minutes");l.add(i,"minutes")){let a=e.find(e=>{let t=r(e.start),n=r(e.end);return l.isSame(t,"minutes")&&l.clone().add(i,"minutes").isSame(n)}),o={start:l.toDate(),end:l.clone().add(i,"minutes").toDate(),booked:!1};a&&(o.booked=!0),n[t.id].push(o)}}),n):{}}GenerateSlotsInfo(e){this.slotsInfo=this._generateslotsInfo(e,this.selectedClassroom)}back(){}onConfirm(e){let t=r(e.start),n=r(e.end);this.dialogService.open(f.a,{context:{title:"Are you sure?"}}).onClose.subscribe(e=>{1==e&&(this.isEditmode?(this.appoinment.start=r(this.selectedTimeRange.date).hour(t.hour()).minute(t.minute()).toDate(),this.appoinment.end=r(this.selectedTimeRange.date).hour(n.hour()).minute(n.minute()).toDate(),this.appointmentService.updatePresetAppointment(this.appoinment).subscribe(e=>{this.toastrService.success("Updated the Appointment","Success")})):(this.appoinment=this.appointmentService.createBlankPresetAppointment(),this.appoinment.child=this.selectedChild,this.appoinment.className=this.selectedClassroom,this.appoinment.presetInfo=this.currentPresetRecord.id,this.appoinment.start=r(this.selectedTimeRange.date).hour(t.hour()).minute(t.minute()).toDate(),this.appoinment.end=r(this.selectedTimeRange.date).hour(n.hour()).minute(n.minute()).toDate(),this.appointmentService.createPresetAppointment(this.appoinment).subscribe(e=>{this.toastrService.success("Registered the New Preset Appointment","Success")})))})}onChildChange(e){}onClassroomChange(e){let t=this.currentPresetRecord.presetItems.find(t=>t.classroom==e);t?this.appointmentService.GetPresetAppointmentByClassroom(e).subscribe(e=>{this.dates=t.timeranges,this.selectedTimeRange=this.dates[0],this.GenerateSlotsInfo(this.apnts)}):this.dates=[]}onTimerangeChange(e){}get title(){return this.isEditmode?"Edit Preset Appointment":"Create Preset Appointment"}get slots(){return this.slotsInfo[this.selectedTimeRange.id]}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](i.a),d["\u0275\u0275directiveInject"](U.a),d["\u0275\u0275directiveInject"](v.a),d["\u0275\u0275directiveInject"](m.G),d["\u0275\u0275directiveInject"](m.wb),d["\u0275\u0275directiveInject"](i.c),d["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-appointment-preset-edit"]],inputs:{isEditmode:["editmode","isEditmode"]},decls:27,vars:20,consts:[[1,"d-flex","align-items-center"],[1,"form-group","row","align-items-center"],[1,"label","col-sm-3"],[1,"col-sm-9"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"childs","title","ngModel","disabled","ngModelChange"],[1,"d-flex","flex-wrap","align-items-center","mt-4"],[4,"ngFor","ngForOf"],[3,"value"],[3,"start","end","confirmed","confirmClick"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-card"),d["\u0275\u0275elementStart"](1,"nb-card-header"),d["\u0275\u0275elementStart"](2,"div",0),d["\u0275\u0275text"](3),d["\u0275\u0275pipe"](4,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"nb-card-body"),d["\u0275\u0275elementStart"](6,"div",1),d["\u0275\u0275elementStart"](7,"label",2),d["\u0275\u0275text"](8),d["\u0275\u0275pipe"](9,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](10,"div",3),d["\u0275\u0275elementStart"](11,"nb-select",4),d["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectedClassroom=e}))("ngModelChange",(function(e){return t.onClassroomChange(e)})),d["\u0275\u0275template"](12,de,4,6,"nb-option",5),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](13,"div",1),d["\u0275\u0275elementStart"](14,"label",2),d["\u0275\u0275text"](15," Date "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](16,"nb-select",4),d["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectedTimeRange=e}))("ngModelChange",(function(e){return t.onTimerangeChange(e)})),d["\u0275\u0275template"](17,me,3,4,"nb-option",5),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](18,"div",1),d["\u0275\u0275elementStart"](19,"label",2),d["\u0275\u0275text"](20),d["\u0275\u0275pipe"](21,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](22,"div",3),d["\u0275\u0275elementStart"](23,"ngx-child-select",6),d["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectedChild=e}))("ngModelChange",(function(e){return t.onChildChange(e)})),d["\u0275\u0275pipe"](24,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](25,"div",7),d["\u0275\u0275template"](26,pe,2,3,"ng-container",8),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind1"](4,12,t.title)," "),d["\u0275\u0275advance"](5),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind1"](9,14,"Classroom"),""),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngModel",t.selectedClassroom),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngForOf",t.classNameList),d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("ngModel",t.selectedTimeRange),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngForOf",t.dates),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind1"](21,16,"Child"),""),d["\u0275\u0275advance"](3),d["\u0275\u0275propertyInterpolate"]("title",d["\u0275\u0275pipeBind1"](24,18,"Select Child")),d["\u0275\u0275property"]("childs",t.childs)("ngModel",t.selectedChild)("disabled",t.isEditmode),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngForOf",t.slots))},directives:[m.u,m.x,m.t,m.gb,I.r,I.u,a.n,ce.a,m.cb,se],pipes:[P.c,a.x,a.e],styles:[""]}),e})();const ve=[{path:"preset",component:le},{path:"new/preset",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-appointment-preset-create"]],decls:1,vars:1,consts:[[3,"editmode"]],template:function(e,t){1&e&&d["\u0275\u0275element"](0,"ngx-appointment-preset-edit",0),2&e&&d["\u0275\u0275property"]("editmode",!1)},directives:[he],styles:[""]}),e})()},{path:"new",component:L},{path:"preset/:appointment_id/:classroom/",component:he},{path:":id",component:C},{path:":id/:appointment_id",component:G},{path:"",component:p}];let ue=(()=>{class e{}return e.\u0275mod=d["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.g.forChild(ve)],i.g]}),e})();var ge=n("WLya"),we=n("PCNd"),be=n("p0MU"),fe=n("Rqib");function xe(){return Object(ge.adapterFactory)(r)}let ye=(()=>{class e{}return e.\u0275mod=d["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.c,we.a,ue,h.b.forRoot({provide:h.f,useFactory:xe}),m.r,m.p,m.L,m.y,m.Cb,m.N,m.tb,m.vb,m.hb,m.yb,F.c,F.e,we.a,be.a,fe.a,o.c,I.y,I.l]]}),e})()}}]);