(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{s9eH:function(e,t,n){"use strict";n.r(t),n.d(t,"AppointmentCenterModule",(function(){return N}));var i=n("ofXK"),r=n("YUSg"),a=n("tyNb"),l=n("7njR"),o=n("3Ksp"),c=n("fXoL"),d=n("aceb"),s=n("3Pt+"),p=n("sYmb");let m=(()=>{class e{constructor(e){this.dialogRef=e}ngOnInit(){}close(e){let t=void 0;!0===e&&(t=o.a.CONFIRM),!1===e&&(t=o.a.DECLINE),this.dialogRef.close({comment:this.comment,status:t})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](d.F))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-confirm-dialog"]],inputs:{apnt:"apnt"},decls:25,vars:27,consts:[[2,"min-width","400px"],[1,"d-flex","align-items-center","justify-content-between"],["nbButton","","ghost","",3,"nbTooltip","click"],["icon","close-outline",2,"color","white"],[1,"row","justify-content-around"],[3,"picture","name","title"],[1,"row","mt-2"],["rows","5","fullWidth","","nbInput","","shape","round",3,"placeholder","ngModel","ngModelChange"],["nbButton","","size","small","status","success",1,"mr-4",3,"tabindex","click"],["nbButton","","size","small","status","danger",3,"click"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-header"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275text"](3),c["\u0275\u0275pipe"](4,"translate"),c["\u0275\u0275elementStart"](5,"button",2),c["\u0275\u0275listener"]("click",(function(){return t.close(void 0)})),c["\u0275\u0275pipe"](6,"translate"),c["\u0275\u0275elementStart"](7,"nb-icon",3),c["\u0275\u0275text"](8,"arrow-back-outline"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"nb-card-body"),c["\u0275\u0275elementStart"](10,"div",4),c["\u0275\u0275element"](11,"nb-user",5),c["\u0275\u0275pipe"](12,"translate"),c["\u0275\u0275element"](13,"nb-user",5),c["\u0275\u0275pipe"](14,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",6),c["\u0275\u0275elementStart"](16,"textarea",7),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.comment=e})),c["\u0275\u0275pipe"](17,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"nb-card-footer"),c["\u0275\u0275elementStart"](19,"button",8),c["\u0275\u0275listener"]("click",(function(){return t.close(!0)})),c["\u0275\u0275text"](20),c["\u0275\u0275pipe"](21,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"button",9),c["\u0275\u0275listener"]("click",(function(){return t.close(!1)})),c["\u0275\u0275text"](23),c["\u0275\u0275pipe"](24,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](4,13,"Confirm or Decline")," "),c["\u0275\u0275advance"](2),c["\u0275\u0275propertyInterpolate"]("nbTooltip",c["\u0275\u0275pipeBind1"](6,15,"Back")),c["\u0275\u0275advance"](6),c["\u0275\u0275propertyInterpolate"]("title",c["\u0275\u0275pipeBind1"](12,17,"Parent")),c["\u0275\u0275property"]("picture",t.apnt.parent.picture)("name",t.apnt.parent.first_name+" "+t.apnt.parent.last_name),c["\u0275\u0275advance"](2),c["\u0275\u0275propertyInterpolate"]("title",c["\u0275\u0275pipeBind1"](14,19,"Desire Child")),c["\u0275\u0275property"]("picture",t.apnt.child.photo)("name",t.apnt.child.first_name+" "+t.apnt.child.last_name),c["\u0275\u0275advance"](3),c["\u0275\u0275propertyInterpolate"]("placeholder",c["\u0275\u0275pipeBind1"](17,21,"Write comment")),c["\u0275\u0275property"]("ngModel",t.comment),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("tabindex",1),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](21,23,"Confirm")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](24,25,"Decline")))},directives:[d.u,d.x,d.q,d.ub,d.I,d.t,d.wb,d.L,s.c,s.r,s.u,d.v],pipes:[p.c],styles:[""]}),e})();var u=n("wd/R");function f(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275element"](1,"nb-badge",25),c["\u0275\u0275elementEnd"]())}function h(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275element"](1,"nb-badge",26),c["\u0275\u0275elementEnd"]())}function v(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275elementStart"](1,"div"),c["\u0275\u0275elementStart"](2,"button",27),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"](2).onConfirmBtnClick(t)})),c["\u0275\u0275text"](3),c["\u0275\u0275pipe"](4,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}2&e&&(c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](4,1,"Confirm")," "))}function g(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"h6",28),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.title)}}function x(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h6",28),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](2,1,"PRESET")," "))}function b(e,t){if(1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"div",18),c["\u0275\u0275elementStart"](2,"nb-card"),c["\u0275\u0275elementStart"](3,"nb-card-header",5),c["\u0275\u0275elementStart"](4,"div",19),c["\u0275\u0275elementStart"](5,"div",20),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",21),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](9,f,2,0,"div",16),c["\u0275\u0275template"](10,h,2,0,"div",16),c["\u0275\u0275template"](11,v,5,3,"div",16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"nb-card-body"),c["\u0275\u0275template"](13,g,2,1,"h6",22),c["\u0275\u0275template"](14,x,3,3,"h6",22),c["\u0275\u0275elementStart"](15,"div",23),c["\u0275\u0275element"](16,"nb-user",24),c["\u0275\u0275pipe"](17,"translate"),c["\u0275\u0275element"](18,"nb-user",24),c["\u0275\u0275pipe"](19,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](6),c["\u0275\u0275textInterpolate1"](" ",n.get_time_text(e)," "),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",n.get_date_text(e)," "),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",n.isConfirmed(e)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",n.isDeclined(e)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",n.isAvailable(e)),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",!n.isPreset(e)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",n.isPreset(e)),c["\u0275\u0275advance"](2),c["\u0275\u0275propertyInterpolate"]("title",c["\u0275\u0275pipeBind1"](17,13,"Parent")),c["\u0275\u0275property"]("picture",e.parent.picture)("name",e.parent.first_name+" "+e.parent.last_name),c["\u0275\u0275advance"](2),c["\u0275\u0275propertyInterpolate"]("title",c["\u0275\u0275pipeBind1"](19,15,"Desire Child")),c["\u0275\u0275property"]("picture",e.child.photo)("name",e.child.first_name+" "+e.child.last_name)}}function S(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",12),c["\u0275\u0275template"](1,b,20,17,"ng-container",17),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.filteredapnts)}}function C(e,t){1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"h5",28),c["\u0275\u0275text"](2),c["\u0275\u0275pipe"](3,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]()),2&e&&(c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](3,1,"There is not any appointments")," !"))}let E=(()=>{class e{constructor(e,t){this.apntService=e,this.dialogService=t,this.selectedDate=u().toDate(),this.filterCriteriaList=[o.a.CONFIRM,o.a.DECLINE,o.a.PENDING]}ngOnInit(){this.apntService.getEventsOfCurrentUser().subscribe(e=>{this.apnts=e,this._updateAppointment()})}dateTimeChange(){this._updateAppointment()}onNext(){this.selectedDate=u(this.selectedDate).add(1,"day").toDate(),this._updateAppointment()}onToday(){this.selectedDate=u().toDate(),this._updateAppointment()}onPrevious(){this.selectedDate=u(this.selectedDate).subtract(1,"day").toDate(),this._updateAppointment()}_updateAppointment(){this.filteredapnts=this.apnts.filter(e=>{if(-1!=this.filterCriteriaList.findIndex(t=>t==e.status)){u(e.start);let t=u(e.end);if(u(this.selectedDate).isSameOrBefore(t,"day"))return!0}return!1})}get_time_text(e){return u(e.start).format("HH:mm")+" - "+u(e.end).format("HH:mm")}get_date_text(e){return u(e.start).format("LL")}isPreset(e){return e.type===o.b.PRESET}isConfirmed(e){return e.status===o.a.CONFIRM}isDeclined(e){return e.status===o.a.DECLINE}isAvailable(e){return e.status===o.a.PENDING}onCheckBoxChange(e){let t;"confirm"==e&&(t=o.a.CONFIRM),"decline"==e&&(t=o.a.DECLINE),"pending"==e&&(t=o.a.PENDING);let n=this.filterCriteriaList.findIndex(e=>e==t);-1==n?this.filterCriteriaList.push(t):this.filterCriteriaList.splice(n,1),console.log(this.filterCriteriaList),this._updateAppointment()}onConfirmBtnClick(e){this.dialogService.open(m,{context:{apnt:e}}).onClose.subscribe(t=>{console.log(t.status),t.status&&t.status!=e.status&&this.apntService.patchEvent(e,{status:t.status,comment:t.comment}).subscribe(t=>{e.status=t.status})})}get selectedDateString(){return u(this.selectedDate).format("MMMM Do YYYY")}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](d.G))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-appointment-center"]],decls:36,vars:24,consts:[[1,"row","text-center"],[1,"col-md-4"],[1,"btn-group"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-outline-secondary",3,"click"],[2,"position","relative"],[2,"opacity","0","z-index","-1",3,"owlDateTime","ngModel","ngModelChange","dateTimeChange"],[1,"trigger",2,"position","absolute","margin-left","-93px","cursor","pointer",3,"owlDateTimeTrigger"],[1,"fas","fa-calendar-alt"],["pickerType","calendar"],["dt1",""],[1,"col-md-4","text-left"],[1,"row","justify-content-center"],[1,"d-flex","text-left",2,"flex-direction","column","width","96px"],["value","true",3,"valueChange"],["class","row justify-content-center",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"row","justify-content-between","align-items-center"],[1,"text-hint"],[1,""],["class","text-center",4,"ngIf"],[1,"row","justify-content-around"],[3,"picture","name","title"],["text","Confirmed","position","top right","status","info"],["text","Declined","position","top right","status","danger"],["nbButton","","outline","","size","small",3,"click"],[1,"text-center"]],template:function(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"div",3),c["\u0275\u0275listener"]("click",(function(){return t.onPrevious()})),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",4),c["\u0275\u0275listener"]("click",(function(){return t.onToday()})),c["\u0275\u0275text"](7),c["\u0275\u0275pipe"](8,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",3),c["\u0275\u0275listener"]("click",(function(){return t.onNext()})),c["\u0275\u0275text"](10),c["\u0275\u0275pipe"](11,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",1),c["\u0275\u0275elementStart"](13,"h3"),c["\u0275\u0275text"](14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",5),c["\u0275\u0275elementStart"](16,"input",6),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectedDate=e}))("dateTimeChange",(function(){return t.dateTimeChange()})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"span",7),c["\u0275\u0275element"](18,"i",8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](19,"owl-date-time",9,10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"div",11),c["\u0275\u0275elementStart"](22,"div",12),c["\u0275\u0275elementStart"](23,"div",13),c["\u0275\u0275elementStart"](24,"nb-checkbox",14),c["\u0275\u0275listener"]("valueChange",(function(){return t.onCheckBoxChange("confirm")})),c["\u0275\u0275text"](25),c["\u0275\u0275pipe"](26,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](27,"nb-checkbox",14),c["\u0275\u0275listener"]("valueChange",(function(){return t.onCheckBoxChange("decline")})),c["\u0275\u0275text"](28),c["\u0275\u0275pipe"](29,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"nb-checkbox",14),c["\u0275\u0275listener"]("valueChange",(function(){return t.onCheckBoxChange("pending")})),c["\u0275\u0275text"](31),c["\u0275\u0275pipe"](32,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](33,"br"),c["\u0275\u0275template"](34,S,2,1,"div",15),c["\u0275\u0275template"](35,C,4,3,"ng-container",16)),2&e){const e=c["\u0275\u0275reference"](20);c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](5,12,"Previous")," "),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](8,14,"Today")," "),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](11,16,"Next")," "),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](t.selectedDateString),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("owlDateTime",e)("ngModel",t.selectedDate),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("owlDateTimeTrigger",e),c["\u0275\u0275advance"](8),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](26,18,"Confirmed")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](29,20,"Declined")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](32,22,"Pending")),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",(null==t.filteredapnts?null:t.filteredapnts.length)>0),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!t.filteredapnts||0==(null==t.filteredapnts?null:t.filteredapnts.length))}},directives:[r.c,s.c,s.r,s.u,r.e,r.b,d.z,i.o,i.n,d.u,d.x,d.t,d.wb,d.o,d.q],pipes:[p.c],styles:[""]}),e})();var I=n("PNcV"),y=n("NdX7"),w=n("vqVJ"),D=n("xgyk");const B=[{path:"",component:E},{path:"request",component:(()=>{class e{constructor(e,t,n,i){this.appointmentService=e,this.toastService=t,this.childService=n,this.userService=i,this.selectedChildren=[]}ngOnInit(){this.userService.getCurrentUser().subscribe(e=>{this.teacher=e,this.childService.getChildsOfTeacher(this.teacher).subscribe(e=>{this.children=e})})}onSubmit(){this.toastService.success("Request has been sent succesfully","success")}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](y.a),c["\u0275\u0275directiveInject"](I.a),c["\u0275\u0275directiveInject"](w.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-request-meeting"]],decls:11,vars:11,consts:[[1,"d-flex","align-items-center","justify-content-between"],[1,"mb-4"],[3,"childs","title","ngModel","multi","ngModelChange"],["nbButton","",3,"disabled","click"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card"),c["\u0275\u0275elementStart"](1,"nb-card-header"),c["\u0275\u0275elementStart"](2,"div",0),c["\u0275\u0275text"](3),c["\u0275\u0275pipe"](4,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"nb-card-body"),c["\u0275\u0275elementStart"](6,"div",1),c["\u0275\u0275elementStart"](7,"ngx-child-select",2),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectedChildren=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"button",3),c["\u0275\u0275listener"]("click",(function(){return t.onSubmit()})),c["\u0275\u0275text"](9),c["\u0275\u0275pipe"](10,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](4,7,"Request Appointment")," "),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("childs",t.children)("title","Select Children")("ngModel",t.selectedChildren)("multi",!0),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("disabled",0==t.selectedChildren.length),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](10,9,"Send Request"),""))},directives:[d.u,d.x,d.t,D.a,s.r,s.u,d.q],pipes:[p.c],styles:[""]}),e})()}];let k=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.g.forChild(B)],a.g]}),e})();var M=n("p0MU"),_=n("Rqib");let N=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,k,d.y,d.A,d.vb,d.r,d.p,d.xb,d.M,d.K,_.a,M.a,s.l,r.d,r.f]]}),e})()}}]);