!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{Smt5:function(n,r,i){"use strict";i.r(r),i.d(r,"PresetModule",(function(){return E}));var o=i("ofXK"),a=i("tyNb"),s=i("cp0P"),c=(i("3Ksp"),i("wd/R")),d=i("7njR"),l=i("PNcV"),p=i("fXoL"),m=i("aceb"),u=i("sYmb");function f(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275element"](1,"nb-user",7),p["\u0275\u0275elementEnd"]()),2&e){var n=p["\u0275\u0275nextContext"]().$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("picture",n.child.photo)("name",n.child.first_name+" "+n.child.last_name)}}function v(e,t){1&e&&(p["\u0275\u0275element"](0,"nb-badge",8),p["\u0275\u0275pipe"](1,"translate")),2&e&&p["\u0275\u0275propertyInterpolate"]("text",p["\u0275\u0275pipeBind1"](1,1,"Booked"))}function b(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"nb-list-item",4),p["\u0275\u0275elementStart"](1,"div"),p["\u0275\u0275text"](2),p["\u0275\u0275pipe"](3,"date"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](4,f,2,2,"div",5),p["\u0275\u0275template"](5,v,2,3,"nb-badge",6),p["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind2"](3,3,n.start,"HH:mm")," "),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngIf",n.booked),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",n.booked)}}function h(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div",2),p["\u0275\u0275elementStart"](1,"nb-card"),p["\u0275\u0275elementStart"](2,"nb-card-header"),p["\u0275\u0275text"](3),p["\u0275\u0275pipe"](4,"date"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](5,"nb-card-body"),p["\u0275\u0275elementStart"](6,"nb-list"),p["\u0275\u0275template"](7,b,6,6,"nb-list-item",3),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](4,2,n.date)," "),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngForOf",r.slots[n.id])}}var g,y,I,S=[{path:"",component:(g=function(){function n(t,r){e(this,n),this.childService=t,this.appointmentService=r}var r,i,o;return r=n,(i=[{key:"ngOnInit",value:function(){var e=this;this.classroom=this.childService.getCurrentClassName(),Object(s.a)({record:this.appointmentService.GetCurrentPresetRecord(),data:this.appointmentService.GetPresetAppointmentByClassroom(this.classroom)}).subscribe((function(t){e.presetRecord=t.record,e.apnts=t.data,e.presetRecord.presetItems.forEach((function(t){t.classroom==e.classroom&&(e.presetItem=t)})),e.slots=e._generateslotsInfo(e.apnts,e.classroom)}))}},{key:"_generateslotsInfo",value:function(e,t){var n={},r=this.presetItem,i=r.duration;return r?(r.timeranges.forEach((function(t){n[t.id]=[];for(var r=c(t.startTime),o=c(t.endTime),a=function(r){var o=e.find((function(e){var t=c(e.start),n=c(e.end);return r.isSame(t,"minutes")&&r.clone().add(i,"minutes").isSame(n)})),a={child:void 0,start:r.toDate(),end:r.clone().add(i,"minutes").toDate(),booked:!1};o&&(a.child=o.child,n[t.id].booked=!0),n[t.id].push(a)},s=r.clone();s.isBefore(o,"minutes");s.add(i,"minutes"))a(s)})),console.log(n),n):{}}}])&&t(r.prototype,i),o&&t(r,o),n}(),g.\u0275fac=function(e){return new(e||g)(p["\u0275\u0275directiveInject"](l.a),p["\u0275\u0275directiveInject"](d.a))},g.\u0275cmp=p["\u0275\u0275defineComponent"]({type:g,selectors:[["ngx-preset"]],decls:8,vars:7,consts:[[1,"row"],["class","col-sm-4",4,"ngFor","ngForOf"],[1,"col-sm-4"],["style","position: relative;",4,"ngFor","ngForOf"],[2,"position","relative"],[4,"ngIf"],["status","danger","position","top right",3,"text",4,"ngIf"],[3,"picture","name"],["status","danger","position","top right",3,"text"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"nb-card"),p["\u0275\u0275elementStart"](1,"nb-card-header"),p["\u0275\u0275text"](2),p["\u0275\u0275pipe"](3,"translate"),p["\u0275\u0275pipe"](4,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](5,"nb-card-body"),p["\u0275\u0275elementStart"](6,"div",0),p["\u0275\u0275template"](7,h,8,4,"div",1),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate2"](" ",p["\u0275\u0275pipeBind1"](3,3,"Preset")," (",p["\u0275\u0275pipeBind1"](4,5,t.classroom)," ) "),p["\u0275\u0275advance"](5),p["\u0275\u0275property"]("ngForOf",null==t.presetItem?null:t.presetItem.timeranges))},directives:[m.u,m.x,m.t,o.n,m.U,m.V,o.o,m.wb,m.o],pipes:[u.c,o.e],styles:[""]}),g)}],x=((y=function t(){e(this,t)}).\u0275mod=p["\u0275\u0275defineNgModule"]({type:y}),y.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(e){return new(e||y)},imports:[[a.g.forChild(S)],a.g]}),y),w=i("p0MU"),E=((I=function t(){e(this,t)}).\u0275mod=p["\u0275\u0275defineNgModule"]({type:I}),I.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(e){return new(e||I)},imports:[[o.c,m.W,m.r,m.y,m.K,m.xb,m.p,w.a,x]]}),I)}}])}();