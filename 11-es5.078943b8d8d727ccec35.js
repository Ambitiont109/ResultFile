!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{xGyx:function(t,a,r){"use strict";r.r(a),r.d(a,"momentAdapterFactory",(function(){return Ie})),r.d(a,"AppointmentsModule",(function(){return De}));var i,o,l=r("ofXK"),c=r("wd/R"),d=r("tyNb"),s=r("RS3s"),m=r("CWoy"),p=r("TUgJ"),v=r("vqVJ"),u=r("fXoL"),h=r("aceb"),f=((i=function(){function t(n,a,r){e(this,t),this.userService=n,this.router=a,this.route=r,this.parents=[],this.teachers=[],this.settings={actions:{add:!1,edit:!1,delete:!1,position:"right"},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},hideSubHeader:!0,hideHeader:!0,pager:{perPage:4},columns:{picture:{type:"custom",renderComponent:p.a}}},this.teacher_src=new s.a,this.parent_src=new s.a}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.userService.getAllUsers().subscribe((function(t){t.forEach((function(t){t.role==m.a.Parent&&e.parents.push(t),t.role==m.a.Teacher&&e.teachers.push(t)})),e.teacher_src.load(e.teachers),e.parent_src.load(e.parents)}))}},{key:"onRowSelect",value:function(e){this.router.navigate([e.data.id],{relativeTo:this.route})}}]),t}()).\u0275fac=function(e){return new(e||i)(u["\u0275\u0275directiveInject"](v.a),u["\u0275\u0275directiveInject"](d.c),u["\u0275\u0275directiveInject"](d.a))},i.\u0275cmp=u["\u0275\u0275defineComponent"]({type:i,selectors:[["ngx-appointments"]],decls:9,vars:4,consts:[["fullWidth",""],["tabTitle","Teachers"],[3,"settings","source","userRowSelect"],["tabTitle","Parents"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"nb-tabset",0),u["\u0275\u0275elementStart"](1,"nb-tab",1),u["\u0275\u0275elementStart"](2,"nb-card"),u["\u0275\u0275elementStart"](3,"nb-card-body"),u["\u0275\u0275elementStart"](4,"ng2-smart-table",2),u["\u0275\u0275listener"]("userRowSelect",(function(e){return t.onRowSelect(e)})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"nb-tab",3),u["\u0275\u0275elementStart"](6,"nb-card"),u["\u0275\u0275elementStart"](7,"nb-card-body"),u["\u0275\u0275elementStart"](8,"ng2-smart-table",2),u["\u0275\u0275listener"]("userRowSelect",(function(e){return t.onRowSelect(e)})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("settings",t.settings)("source",t.teacher_src),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("settings",t.settings)("source",t.parent_src))},directives:[h.rb,h.qb,h.t,h.s,s.b],styles:[""]}),i),w=r("kRoH"),g=r("7njR"),b=r("3Ksp"),y=r("eIep"),k=r("lJxs"),x=r("cp0P"),S=r("cSNu"),E=((o=function(){function t(){e(this,t),this.locale="en",this.viewChange=new u.EventEmitter,this.viewDateChange=new u.EventEmitter,this.CalendarView=w.d}return n(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=u["\u0275\u0275defineComponent"]({type:o,selectors:[["ngx-calendar-header"]],inputs:{view:"view",viewDate:"viewDate",locale:"locale"},outputs:{viewChange:"viewChange",viewDateChange:"viewDateChange"},decls:22,vars:16,consts:[[1,"row","text-center"],[1,"col-md-4"],[1,"btn-group"],["mwlCalendarPreviousView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],["mwlCalendarToday","",1,"btn","btn-outline-secondary",3,"viewDate","viewDateChange"],["mwlCalendarNextView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"div",2),u["\u0275\u0275elementStart"](3,"div",3),u["\u0275\u0275listener"]("viewDateChange",(function(e){return t.viewDate=e}))("viewDateChange",(function(){return t.viewDateChange.next(t.viewDate)})),u["\u0275\u0275text"](4," Previous "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"div",4),u["\u0275\u0275listener"]("viewDateChange",(function(e){return t.viewDate=e}))("viewDateChange",(function(){return t.viewDateChange.next(t.viewDate)})),u["\u0275\u0275text"](6," Today "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"div",5),u["\u0275\u0275listener"]("viewDateChange",(function(e){return t.viewDate=e}))("viewDateChange",(function(){return t.viewDateChange.next(t.viewDate)})),u["\u0275\u0275text"](8," Next "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"div",1),u["\u0275\u0275elementStart"](10,"h3"),u["\u0275\u0275text"](11),u["\u0275\u0275pipe"](12,"calendarDate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"div",1),u["\u0275\u0275elementStart"](14,"div",2),u["\u0275\u0275elementStart"](15,"div",6),u["\u0275\u0275listener"]("click",(function(){return t.viewChange.emit(t.CalendarView.Month)})),u["\u0275\u0275text"](16," Month "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](17,"div",6),u["\u0275\u0275listener"]("click",(function(){return t.viewChange.emit(t.CalendarView.Week)})),u["\u0275\u0275text"](18," Week "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"div",6),u["\u0275\u0275listener"]("click",(function(){return t.viewChange.emit(t.CalendarView.Day)})),u["\u0275\u0275text"](20," Day "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](21,"br")),2&e&&(u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("view",t.view)("viewDate",t.viewDate),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("viewDate",t.viewDate),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("view",t.view)("viewDate",t.viewDate),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind3"](12,12,t.viewDate,t.view+"ViewTitle",t.locale)),u["\u0275\u0275advance"](4),u["\u0275\u0275classProp"]("active",t.view===t.CalendarView.Month),u["\u0275\u0275advance"](2),u["\u0275\u0275classProp"]("active",t.view===t.CalendarView.Week),u["\u0275\u0275advance"](2),u["\u0275\u0275classProp"]("active",t.view===t.CalendarView.Day))},directives:[w.g,w.i,w.h],pipes:[w.j],styles:[""]}),o);function C(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"mwl-calendar-month-view",8),u["\u0275\u0275listener"]("dayClicked",(function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().dayClicked(e.day)})),u["\u0275\u0275elementEnd"]()}if(2&e){var a=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("viewDate",a.viewDate)("events",a.events)("activeDayIsOpen",a.activeDayIsOpen)}}function I(e,t){if(1&e&&u["\u0275\u0275element"](0,"mwl-calendar-week-view",9),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("hourSegments",3)("viewDate",n.viewDate)("events",n.events)}}function T(e,t){if(1&e&&u["\u0275\u0275element"](0,"mwl-calendar-day-view",9),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("hourSegments",3)("viewDate",n.viewDate)("events",n.events)}}var D,P=((D=function(){function t(n,a,r,i,o,l,c){var d=this;e(this,t),this.document=n,this.appointmentService=a,this.userService=r,this.route=i,this.router=o,this.dialogService=l,this.toastrService=c,this.view=w.d.Month,this.viewDate=new Date,this.activeDayIsOpen=!0,this.darkThemeClass="dark-theme",this.actions=[{label:'<i class="fas fa-fw fa-pencil-alt"></i>',a11yLabel:"Detail",onClick:function(e){var t=e.event;d.onDetailEvent(t)}},{label:'<i class="fas fa-fw fa-trash-alt"></i>',a11yLabel:"Delete",onClick:function(e){var t=e.event;d.onDeleteEvent(t)}}]}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.document.body.classList.add(this.darkThemeClass),this.route.paramMap.pipe(Object(y.a)((function(t){return e.userId=Number(t.get("id")),Object(x.a)({user:e.userService.getUserById(e.userId),appointments:e.appointmentService.getEventsByUserId(e.userId)})})),Object(k.a)((function(t){var n=t.user,a=t.appointments;return e.user=n,a.map((function(t){return function(e,t){return{id:e.id,start:e.start,end:e.end,title:e.title,color:b.e[e.color],actions:t,meta:e.type}}(t,e.actions)}))}))).subscribe((function(t){e.events=t}))}},{key:"onDetailEvent",value:function(e){e.meta==b.b.FREE&&this.router.navigate([e.id],{relativeTo:this.route}),e.meta==b.b.PRESET&&this.router.navigate(["/appointment/preset/"+e.id])}},{key:"onDeleteEvent",value:function(e){var t=this;this.dialogService.open(S.a,{context:{title:"Are you sure?"}}).onClose.subscribe((function(n){1==n&&t.appointmentService.deleteEventById(e.id).subscribe((function(n){var a=t.events.findIndex((function(t){return t.id==e.id}));t.events.splice(a,1),t.events=Object.assign([],t.events),t.toastrService.success("Deleted the Appointment","Success")}))}))}},{key:"dayClicked",value:function(e){var t=e.date,n=e.events;c(t).isSame(this.viewDate,"month")&&(this.activeDayIsOpen=!(c(t).isSame(this.viewDate,"day")&&!0===this.activeDayIsOpen||0===n.length),this.viewDate=t)}},{key:"back",value:function(){this.router.navigate(["/appointment"])}},{key:"ngOnDestroy",value:function(){this.document.body.classList.remove(this.darkThemeClass)}}]),t}()).\u0275fac=function(e){return new(e||D)(u["\u0275\u0275directiveInject"](l.d),u["\u0275\u0275directiveInject"](g.a),u["\u0275\u0275directiveInject"](v.a),u["\u0275\u0275directiveInject"](d.a),u["\u0275\u0275directiveInject"](d.c),u["\u0275\u0275directiveInject"](h.F),u["\u0275\u0275directiveInject"](h.vb))},D.\u0275cmp=u["\u0275\u0275defineComponent"]({type:D,selectors:[["ngx-appointment-detail"]],decls:14,vars:11,consts:[[1,"d-flex","align-items-center"],["nbTooltip","Back","nbButton","","ghost","",3,"click"],["icon","arrow-back-outline",2,"color","white"],[3,"onlyPicture","name","picture"],[3,"view","viewDate","viewChange","viewDateChange"],[3,"ngSwitch"],[3,"viewDate","events","activeDayIsOpen","dayClicked",4,"ngSwitchCase"],[3,"hourSegments","viewDate","events",4,"ngSwitchCase"],[3,"viewDate","events","activeDayIsOpen","dayClicked"],[3,"hourSegments","viewDate","events"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"nb-card"),u["\u0275\u0275elementStart"](1,"nb-card-header"),u["\u0275\u0275elementStart"](2,"div",0),u["\u0275\u0275elementStart"](3,"button",1),u["\u0275\u0275listener"]("click",(function(){return t.back()})),u["\u0275\u0275elementStart"](4,"nb-icon",2),u["\u0275\u0275text"](5,"arrow-back-outline"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](6,"nb-user",3),u["\u0275\u0275text"](7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"nb-card-body"),u["\u0275\u0275elementStart"](9,"ngx-calendar-header",4),u["\u0275\u0275listener"]("viewChange",(function(e){return t.view=e}))("viewDateChange",(function(e){return t.viewDate=e})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"div",5),u["\u0275\u0275template"](11,C,1,3,"mwl-calendar-month-view",6),u["\u0275\u0275template"](12,I,1,3,"mwl-calendar-week-view",7),u["\u0275\u0275template"](13,T,1,3,"mwl-calendar-day-view",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("onlyPicture",!0)("name",(null==t.user?null:t.user.first_name)+" "+(null==t.user?null:t.user.last_name))("picture",null==t.user?null:t.user.picture),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate2"](" ",t.user.first_name," ",t.user.last_name," "),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("view",t.view)("viewDate",t.viewDate),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngSwitch",t.view),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngSwitchCase","month"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngSwitchCase","week"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngSwitchCase","day"))},directives:[h.t,h.w,h.p,h.I,h.Ab,h.s,E,l.q,l.r,w.c,w.e,w.a],styles:['.cal-month-view .cal-header{text-align:center;font-weight:bolder}  .cal-month-view .cal-header .cal-cell{padding:5px 0;overflow:hidden;text-overflow:ellipsis;display:block;white-space:nowrap}  .cal-month-view .cal-days{border:1px solid;border-bottom:0}  .cal-month-view .cal-cell-top{min-height:78px;flex:1}  .cal-month-view .cal-cell-row{display:flex}  .cal-month-view .cal-cell{float:left;flex:1;display:flex;flex-direction:column;align-items:stretch}  .cal-month-view .cal-cell .cal-event{pointer-events:all!important}  .cal-month-view .cal-day-cell{min-height:100px}@media (-ms-high-contrast:none){  .cal-month-view .cal-day-cell{display:block}}  .cal-month-view .cal-day-cell:not(:last-child){border-right:1px solid}  .cal-month-view .cal-days .cal-cell-row{border-bottom:1px solid}  .cal-month-view .cal-day-badge{margin-top:18px;margin-left:10px;display:inline-block;min-width:10px;padding:3px 7px;font-size:12px;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:middle;border-radius:10px}  .cal-month-view .cal-day-number{font-size:1.2em;font-weight:400;opacity:.5;margin-top:15px;margin-right:15px;float:right;margin-bottom:10px}  .cal-month-view .cal-events{flex:1;align-items:flex-end;margin:3px;line-height:10px;display:flex;flex-wrap:wrap}  .cal-month-view .cal-event{width:10px;height:10px;border-radius:50%;display:inline-block;margin:2px}  .cal-month-view .cal-day-cell.cal-in-month.cal-has-events{cursor:pointer}  .cal-month-view .cal-day-cell.cal-out-month .cal-day-number{opacity:.1;cursor:default}  .cal-month-view .cal-day-cell.cal-today .cal-day-number{font-size:1.9em}  .cal-month-view .cal-open-day-events{padding:15px}  .cal-month-view .cal-open-day-events .cal-event{position:relative;top:2px}  .cal-month-view .cal-out-month .cal-day-badge,   .cal-month-view .cal-out-month .cal-event{opacity:.3}  .cal-month-view .cal-draggable{cursor:move}  .cal-month-view .cal-drag-active *{pointer-events:none}  .cal-month-view .cal-event-title{cursor:pointer}  .cal-month-view .cal-event-title:hover{text-decoration:underline}  .cal-month-view{background-color:#fff}  .cal-month-view .cal-cell-row:hover{background-color:#fafafa}  .cal-month-view .cal-cell-row .cal-cell:hover,   .cal-month-view .cal-cell.cal-has-events.cal-open{background-color:#ededed}  .cal-month-view .cal-days{border-color:#e1e1e1}  .cal-month-view .cal-day-cell:not(:last-child){border-right-color:#e1e1e1}  .cal-month-view .cal-days .cal-cell-row{border-bottom-color:#e1e1e1}  .cal-month-view .cal-day-badge{background-color:#b94a48;color:#fff}  .cal-month-view .cal-event{background-color:#1e90ff;border-color:#d1e8ff;color:#fff}  .cal-month-view .cal-day-cell.cal-weekend .cal-day-number{color:#8b0000}  .cal-month-view .cal-day-cell.cal-today{background-color:#e8fde7}  .cal-month-view .cal-day-cell.cal-drag-over{background-color:#e0e0e0!important}  .cal-month-view .cal-open-day-events{color:#fff;background-color:#555;box-shadow:inset 0 0 15px 0 rgba(0,0,0,.5)}  .cal-week-view *{box-sizing:border-box}  .cal-week-view .cal-day-headers{display:flex;padding-left:70px;border:1px solid}  .cal-week-view .cal-day-headers .cal-header{flex:1;text-align:center;padding:5px}  .cal-week-view .cal-day-headers .cal-header:not(:last-child){border-right:1px solid}  .cal-week-view .cal-day-headers .cal-header:first-child{border-left:1px solid}  .cal-week-view .cal-day-headers span{font-weight:400;opacity:.5}  .cal-week-view .cal-day-column{flex-grow:1;border-left:1px solid}  .cal-week-view .cal-event{font-size:12px;border:1px solid}  .cal-week-view .cal-time-label-column{width:70px;height:100%}  .cal-week-view .cal-current-time-marker{position:absolute;width:100%;height:2px;z-index:2}  .cal-week-view .cal-all-day-events{border-left:1px solid;border-right:1px solid;border-top:0;border-bottom:3px solid;padding-top:3px;position:relative}  .cal-week-view .cal-all-day-events .cal-day-columns{height:100%;width:100%;display:flex;position:absolute;top:0;z-index:0}  .cal-week-view .cal-all-day-events .cal-events-row{position:relative;height:31px;margin-left:70px}  .cal-week-view .cal-all-day-events .cal-event-container{display:inline-block;position:absolute}  .cal-week-view .cal-all-day-events .cal-event-container.resize-active{z-index:1;pointer-events:none}  .cal-week-view .cal-all-day-events .cal-event{padding:0 5px;margin-left:2px;margin-right:2px;height:28px;line-height:28px}  .cal-week-view .cal-all-day-events .cal-starts-within-week .cal-event{border-top-left-radius:5px;border-bottom-left-radius:5px}  .cal-week-view .cal-all-day-events .cal-ends-within-week .cal-event{border-top-right-radius:5px;border-bottom-right-radius:5px}  .cal-week-view .cal-all-day-events .cal-time-label-column{display:flex;align-items:center;justify-content:center;font-size:14px}  .cal-week-view .cal-all-day-events .cal-resize-handle{width:6px;height:100%;cursor:col-resize;position:absolute;top:0}  .cal-week-view .cal-all-day-events .cal-resize-handle.cal-resize-handle-after-end{right:0}  .cal-week-view .cal-event,   .cal-week-view .cal-header{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}  .cal-week-view .cal-drag-active{pointer-events:none;z-index:1}  .cal-week-view .cal-drag-active *{pointer-events:none}  .cal-week-view .cal-time-events{position:relative;border:1px solid;border-top:0;display:flex}  .cal-week-view .cal-time-events .cal-day-columns{display:flex;flex-grow:1}  .cal-week-view .cal-time-events .cal-day-column,   .cal-week-view .cal-time-events .cal-events-container{position:relative}  .cal-week-view .cal-time-events .cal-event-container{position:absolute;z-index:1}  .cal-week-view .cal-time-events .cal-event{width:calc(100% - 2px);height:calc(100% - 2px);margin:1px;padding:0 5px;line-height:25px}  .cal-week-view .cal-time-events .cal-resize-handle{width:100%;height:4px;cursor:row-resize;position:absolute}  .cal-week-view .cal-time-events .cal-resize-handle.cal-resize-handle-after-end{bottom:0}  .cal-week-view .cal-hour-segment{position:relative}  .cal-week-view .cal-hour-segment:after{content:"\\00a0"}  .cal-week-view .cal-event-container:not(.cal-draggable){cursor:pointer}  .cal-week-view .cal-draggable{cursor:move}  .cal-week-view .cal-hour-segment,   .cal-week-view mwl-calendar-week-view-hour-segment{display:block}  .cal-week-view .cal-hour:last-child :not(:last-child) .cal-hour-segment,   .cal-week-view .cal-hour:not(:last-child) .cal-hour-segment{border-bottom:thin dashed}  .cal-week-view .cal-time{font-weight:700;padding-top:5px;width:70px;text-align:center}  .cal-week-view .cal-hour-segment.cal-after-hour-start .cal-time{display:none}  .cal-week-view .cal-starts-within-day .cal-event{border-top-left-radius:5px;border-top-right-radius:5px}  .cal-week-view .cal-ends-within-day .cal-event{border-bottom-left-radius:5px;border-bottom-right-radius:5px}  .cal-week-view{background-color:#fff;border-top:1px solid #e1e1e1}  .cal-week-view .cal-day-headers{border-color:#e1e1e1;border-top:0}  .cal-week-view .cal-day-headers .cal-header:not(:last-child){border-right-color:#e1e1e1}  .cal-week-view .cal-day-headers .cal-header:first-child{border-left-color:#e1e1e1}  .cal-week-view .cal-day-headers .cal-drag-over,   .cal-week-view .cal-day-headers .cal-header:hover{background-color:#ededed}  .cal-week-view .cal-day-column{border-left-color:#e1e1e1}  .cal-week-view .cal-event{background-color:#d1e8ff;border-color:#1e90ff;color:#1e90ff}  .cal-week-view .cal-all-day-events{border-color:#e1e1e1}  .cal-week-view .cal-header.cal-today{background-color:#e8fde7}  .cal-week-view .cal-header.cal-weekend span{color:#8b0000}  .cal-week-view .cal-time-events{border-color:#e1e1e1}  .cal-week-view .cal-time-events .cal-day-columns:not(.cal-resize-active) .cal-hour-segment:hover{background-color:#ededed}  .cal-week-view .cal-hour-odd{background-color:#fafafa}  .cal-week-view .cal-drag-over .cal-hour-segment{background-color:#ededed}  .cal-week-view .cal-hour:last-child :not(:last-child) .cal-hour-segment,   .cal-week-view .cal-hour:not(:last-child) .cal-hour-segment{border-bottom-color:#e1e1e1}  .cal-week-view .cal-current-time-marker{background-color:#ea4334}  .cal-day-view mwl-calendar-week-view-header{display:none}  .cal-day-view .cal-events-container{margin-left:70px}  .cal-day-view .cal-day-column{border-left:0}  .cal-day-view .cal-current-time-marker{margin-left:70px;width:calc(100% - 70px)}  .cal-tooltip{position:absolute;z-index:1070;display:block;font-style:normal;font-weight:400;letter-spacing:normal;line-break:auto;line-height:1.5;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;white-space:normal;word-break:normal;word-spacing:normal;font-size:11px;word-wrap:break-word;opacity:.9}  .cal-tooltip.cal-tooltip-top{padding:5px 0;margin-top:-3px}  .cal-tooltip.cal-tooltip-top .cal-tooltip-arrow{bottom:0;left:50%;margin-left:-5px;border-width:5px 5px 0}  .cal-tooltip.cal-tooltip-right{padding:0 5px;margin-left:3px}  .cal-tooltip.cal-tooltip-right .cal-tooltip-arrow{top:50%;left:0;margin-top:-5px;border-width:5px 5px 5px 0}  .cal-tooltip.cal-tooltip-bottom{padding:5px 0;margin-top:3px}  .cal-tooltip.cal-tooltip-bottom .cal-tooltip-arrow{top:0;left:50%;margin-left:-5px;border-width:0 5px 5px}  .cal-tooltip.cal-tooltip-left{padding:0 5px;margin-left:-3px}  .cal-tooltip.cal-tooltip-left .cal-tooltip-arrow{top:50%;right:0;margin-top:-5px;border-width:5px 0 5px 5px}  .cal-tooltip-inner{max-width:200px;padding:3px 8px;text-align:center;border-radius:.25rem}  .cal-tooltip-arrow{position:absolute;width:0;height:0;border-color:transparent;border-style:solid}  .cal-tooltip.cal-tooltip-top .cal-tooltip-arrow{border-top-color:#000}  .cal-tooltip.cal-tooltip-right .cal-tooltip-arrow{border-right-color:#000}  .cal-tooltip.cal-tooltip-bottom .cal-tooltip-arrow{border-bottom-color:#000}  .cal-tooltip.cal-tooltip-left .cal-tooltip-arrow{border-left-color:#000}  .cal-tooltip-inner{color:#fff;background-color:#000}  .dark-theme{color:#d5d6d7}  .dark-theme,   .dark-theme .cal-month-view{background-color:#1f262d}  .dark-theme .cal-month-view .cal-cell-row:hover{background-color:#394046}  .dark-theme .cal-month-view .cal-cell-row .cal-cell:hover,   .dark-theme .cal-month-view .cal-cell.cal-has-events.cal-open{background-color:#2c343a}  .dark-theme .cal-month-view .cal-days{border-color:rgba(0,0,0,.6)}  .dark-theme .cal-month-view .cal-day-cell:not(:last-child){border-right-color:rgba(0,0,0,.6)}  .dark-theme .cal-month-view .cal-days .cal-cell-row{border-bottom-color:rgba(0,0,0,.6)}  .dark-theme .cal-month-view .cal-day-badge{background-color:#b94a48;color:#fff}  .dark-theme .cal-month-view .cal-event{background-color:#394046;border-color:#d1e8ff;color:#fff}  .dark-theme .cal-month-view .cal-day-cell.cal-weekend .cal-day-number{color:#cd5c5c}  .dark-theme .cal-month-view .cal-day-cell.cal-today{background-color:#394046}  .dark-theme .cal-month-view .cal-day-cell.cal-drag-over{background-color:#21272c!important}  .dark-theme .cal-month-view .cal-open-day-events{color:#fff;background-color:#394046;box-shadow:inset 0 0 15px 0 rgba(0,0,0,.5)}  .dark-theme .cal-week-view{background-color:#1f262d;border-top:1px solid rgba(0,0,0,.6)}  .dark-theme .cal-week-view .cal-day-headers{border-color:rgba(0,0,0,.6);border-top:0}  .dark-theme .cal-week-view .cal-day-headers .cal-header:not(:last-child){border-right-color:rgba(0,0,0,.6)}  .dark-theme .cal-week-view .cal-day-headers .cal-header:first-child{border-left-color:rgba(0,0,0,.6)}  .dark-theme .cal-week-view .cal-day-headers .cal-drag-over,   .dark-theme .cal-week-view .cal-day-headers .cal-header:hover{background-color:#2c343a}  .dark-theme .cal-week-view .cal-day-column{border-left-color:rgba(0,0,0,.6)}  .dark-theme .cal-week-view .cal-event{background-color:#d1e8ff;border-color:#394046;color:#394046}  .dark-theme .cal-week-view .cal-all-day-events{border-color:rgba(0,0,0,.6)}  .dark-theme .cal-week-view .cal-header.cal-today{background-color:#394046}  .dark-theme .cal-week-view .cal-header.cal-weekend span{color:#cd5c5c}  .dark-theme .cal-week-view .cal-time-events{border-color:rgba(0,0,0,.6)}  .dark-theme .cal-week-view .cal-time-events .cal-day-columns:not(.cal-resize-active) .cal-hour-segment:hover{background-color:#2c343a}  .dark-theme .cal-week-view .cal-hour-odd{background-color:#394046}  .dark-theme .cal-week-view .cal-drag-over .cal-hour-segment{background-color:#2c343a}  .dark-theme .cal-week-view .cal-hour:last-child :not(:last-child) .cal-hour-segment,   .dark-theme .cal-week-view .cal-hour:not(:last-child) .cal-hour-segment{border-bottom-color:rgba(0,0,0,.6)}  .dark-theme .cal-week-view .cal-current-time-marker{background-color:#ea4334}  .dark-theme .cal-tooltip.cal-tooltip-top .cal-tooltip-arrow{border-top-color:#000}  .dark-theme .cal-tooltip.cal-tooltip-right .cal-tooltip-arrow{border-right-color:#000}  .dark-theme .cal-tooltip.cal-tooltip-bottom .cal-tooltip-arrow{border-bottom-color:#000}  .dark-theme .cal-tooltip.cal-tooltip-left .cal-tooltip-arrow{border-left-color:#000}  .dark-theme .cal-tooltip-inner{color:#fff;background-color:#000}  .dark-theme .cal-month-view .cal-day-cell.cal-out-month .cal-day-number{opacity:.15}  .dark-theme .card{border-color:rgba(0,0,0,.6)}  .dark-theme .card-header{background-color:#394046}  .dark-theme .card-body{background-color:#1f262d}  .dark-theme .nav-tabs{border-bottom-color:rgba(0,0,0,.6)}  .dark-theme .nav-tabs .nav-link.active{background-color:#1f262d;color:#d5d6d7;border-color:rgba(0,0,0,.6)}  .dark-theme .nav-tabs .nav-link:focus,   .dark-theme .nav-tabs .nav-link:hover{border-color:rgba(0,0,0,.6)}']}),D),F=r("CHuZ"),O=r("3Pt+"),A=r("kiHB"),M=r("RbqP"),j=r("YUSg");function _(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",20),u["\u0275\u0275text"](1,"required"),u["\u0275\u0275elementEnd"]())}function q(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275template"](1,_,2,0,"span",19),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.appointmentForm.get("teacher").errors.required)}}function B(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",20),u["\u0275\u0275text"](1,"required"),u["\u0275\u0275elementEnd"]())}function z(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275template"](1,B,2,0,"span",19),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.appointmentForm.get("parent").errors.required)}}function N(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",20),u["\u0275\u0275text"](1,"required"),u["\u0275\u0275elementEnd"]())}function R(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275template"](1,N,2,0,"span",19),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.appointmentForm.get("title").errors.required)}}function G(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",20),u["\u0275\u0275text"](1,"required"),u["\u0275\u0275elementEnd"]())}function L(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275template"](1,G,2,0,"span",19),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.appointmentForm.get("start").errors.required)}}function V(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",20),u["\u0275\u0275text"](1,"required"),u["\u0275\u0275elementEnd"]())}function U(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",20),u["\u0275\u0275text"](1,"End Time is not After Start Time"),u["\u0275\u0275elementEnd"]())}function K(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275template"](1,V,2,0,"span",19),u["\u0275\u0275template"](2,U,2,0,"span",19),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.appointmentForm.get("end").errors.required),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.appointmentForm.get("end").errors.mustAfter)}}var W,H,J=((H=function(){function t(n,a,r,i,o,l){e(this,t),this.route=n,this.router=a,this.toastrService=r,this.appointmentService=i,this.userService=o,this.fb=l,this.isInvalidControl=F.a,this.isEditmode=!0}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.userService.getAllUsers().subscribe((function(t){e.teachers=[],e.parents=[],t.forEach((function(t){t.role==m.a.Teacher&&e.teachers.push(t),t.role==m.a.Parent&&e.parents.push(t)}))})),this.appointmentForm=this.fb.group({title:["",O.A.required],teacher:["",[O.A.required]],parent:["",O.A.required],start:[c().toDate(),O.A.required],end:[c().toDate(),O.A.required]},{validators:[Object(A.a)("start","end")]}),this.isEditmode&&this.route.paramMap.pipe(Object(y.a)((function(t){return e.appointmentId=Number(t.get("appointment_id")),e.userId=Number(t.get("id")),e.appointmentService.getEventById(e.appointmentId)}))).subscribe((function(t){e.appoinment=t,e.InitForm(t)}))}},{key:"InitForm",value:function(e){console.log(e),this.appointmentForm.reset(e)}},{key:"onSubmit",value:function(){var e=this;this.appointmentForm.markAllAsTouched(),this.appointmentForm.valid&&(this.isEditmode?(Object.assign(this.appoinment,this.appointmentForm.value),this.appointmentService.UpdateEventById(this.appoinment).subscribe((function(){})),this.toastrService.success("Updated the Appointment Info","Success")):(this.appoinment=Object.assign({},this.appointmentForm.value),this.appoinment.type=b.b.FREE,this.appointmentService.CreateEvent(this.appoinment).subscribe((function(t){e.toastrService.success("Registered the New Appointment","Success"),e.router.navigate(["/appointment/"+e.appoinment.parent.id])}))))}},{key:"back",value:function(){this.router.navigate(this.userId?["/appointment/"+this.userId]:["/appointment"])}}]),t}()).\u0275fac=function(e){return new(e||H)(u["\u0275\u0275directiveInject"](d.a),u["\u0275\u0275directiveInject"](d.c),u["\u0275\u0275directiveInject"](h.vb),u["\u0275\u0275directiveInject"](g.a),u["\u0275\u0275directiveInject"](v.a),u["\u0275\u0275directiveInject"](O.e))},H.\u0275cmp=u["\u0275\u0275defineComponent"]({type:H,selectors:[["ngx-appointment-edit"]],inputs:{isEditmode:["editmode","isEditmode"]},decls:46,vars:19,consts:[[1,"d-flex","align-items-center"],["nbTooltip","Back","nbButton","","ghost","",3,"click"],["icon","arrow-back-outline",2,"color","white"],[1,"row","justify-content-center",3,"formGroup","ngSubmit"],[1,"col-sm-6"],[1,"form-group","row","align-items-center"],[1,"label","col-sm-3"],[1,"col-sm-9"],["formControlName","teacher",3,"users","title","disabled"],[4,"ngIf"],["formControlName","parent",3,"users","title","disabled"],[1,"form-group","row"],["nbInput","","type","text","formControlName","title",3,"status"],["nbInput","","formControlName","start",3,"owlDateTimeTrigger","owlDateTime","status"],["dt",""],["nbInput","","formControlName","end",3,"owlDateTimeTrigger","owlDateTime","status"],["dt2",""],[1,"row","justify-content-end"],["nbInput","","type","submit","value","Save"],["class","error-text",4,"ngIf"],[1,"error-text"]],template:function(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-card"),u["\u0275\u0275elementStart"](1,"nb-card-header"),u["\u0275\u0275elementStart"](2,"div",0),u["\u0275\u0275elementStart"](3,"button",1),u["\u0275\u0275listener"]("click",(function(){return t.back()})),u["\u0275\u0275elementStart"](4,"nb-icon",2),u["\u0275\u0275text"](5,"arrow-back-outline"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](6," Edit Appointment "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"nb-card-body"),u["\u0275\u0275elementStart"](8,"form",3),u["\u0275\u0275listener"]("ngSubmit",(function(){return t.onSubmit()})),u["\u0275\u0275elementStart"](9,"div",4),u["\u0275\u0275elementStart"](10,"div",5),u["\u0275\u0275elementStart"](11,"label",6),u["\u0275\u0275text"](12," Teacher"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"div",7),u["\u0275\u0275element"](14,"ngx-user-select",8),u["\u0275\u0275template"](15,q,2,1,"div",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](16,"div",5),u["\u0275\u0275elementStart"](17,"label",6),u["\u0275\u0275text"](18," Parent"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"div",7),u["\u0275\u0275element"](20,"ngx-user-select",10),u["\u0275\u0275template"](21,z,2,1,"div",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](22,"div",11),u["\u0275\u0275elementStart"](23,"label",6),u["\u0275\u0275text"](24," Title"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](25,"div",7),u["\u0275\u0275element"](26,"input",12),u["\u0275\u0275template"](27,R,2,1,"div",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](28,"div",11),u["\u0275\u0275elementStart"](29,"label",6),u["\u0275\u0275text"](30," Start Time"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](31,"div",7),u["\u0275\u0275element"](32,"input",13),u["\u0275\u0275template"](33,L,2,1,"div",9),u["\u0275\u0275element"](34,"owl-date-time",null,14),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](36,"div",11),u["\u0275\u0275elementStart"](37,"label",6),u["\u0275\u0275text"](38," End Time"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](39,"div",7),u["\u0275\u0275element"](40,"input",15),u["\u0275\u0275template"](41,K,3,2,"div",9),u["\u0275\u0275element"](42,"owl-date-time",null,16),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](44,"div",17),u["\u0275\u0275element"](45,"input",18),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275reference"](35),a=u["\u0275\u0275reference"](43);u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("formGroup",t.appointmentForm),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("users",t.teachers)("title","Select Teacher")("disabled",t.isEditmode),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.appointmentForm,"teacher")),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("users",t.parents)("title","Select Parent")("disabled",t.isEditmode),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.appointmentForm,"parent")),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("status",t.isInvalidControl(t.appointmentForm,"title")?"danger":"basic"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.appointmentForm,"title")),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("owlDateTimeTrigger",n)("owlDateTime",n)("status",t.isInvalidControl(t.appointmentForm,"start")?"danger":"basic"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.appointmentForm,"start")),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("owlDateTimeTrigger",a)("owlDateTime",a)("status",t.isInvalidControl(t.appointmentForm,"end")?"danger":"basic"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.appointmentForm,"end"))}},directives:[h.t,h.w,h.p,h.I,h.s,O.C,O.s,O.j,M.a,O.r,O.h,l.o,h.L,O.c,j.b,j.d,j.a],styles:[".error-text[_ngcontent-%COMP%]{color:red}"]}),H),Y=((W=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||W)},W.\u0275cmp=u["\u0275\u0275defineComponent"]({type:W,selectors:[["ngx-appointment-create"]],decls:1,vars:1,consts:[[3,"editmode"]],template:function(e,t){1&e&&u["\u0275\u0275element"](0,"ngx-appointment-edit",0),2&e&&u["\u0275\u0275property"]("editmode",!1)},directives:[J],styles:[""]}),W);function X(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"span",22),u["\u0275\u0275text"](2,"required"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}function Z(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",22),u["\u0275\u0275text"](1,"required"),u["\u0275\u0275elementEnd"]())}function $(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275template"](1,Z,2,0,"span",23),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.toddlerPresetForm.get("start").errors.required)}}function Q(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",22),u["\u0275\u0275text"](1,"required"),u["\u0275\u0275elementEnd"]())}function ee(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",22),u["\u0275\u0275text"](1,"End Time is not After Start Time"),u["\u0275\u0275elementEnd"]())}function te(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275template"](1,Q,2,0,"span",23),u["\u0275\u0275template"](2,ee,2,0,"span",23),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.toddlerPresetForm.get("end").errors.required),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.toddlerPresetForm.get("end").errors.mustAfter)}}function ne(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",22),u["\u0275\u0275text"](1,"required"),u["\u0275\u0275elementEnd"]())}function ae(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275template"](1,ne,2,0,"span",23),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.toddlerPresetForm.get("duration").errors.required)}}function re(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"span",22),u["\u0275\u0275text"](2,"required"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}function ie(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",22),u["\u0275\u0275text"](1,"required"),u["\u0275\u0275elementEnd"]())}function oe(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275template"](1,ie,2,0,"span",23),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.kindergartenPresetForm.get("start").errors.required)}}function le(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",22),u["\u0275\u0275text"](1,"required"),u["\u0275\u0275elementEnd"]())}function ce(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",22),u["\u0275\u0275text"](1,"End Time is not After Start Time"),u["\u0275\u0275elementEnd"]())}function de(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275template"](1,le,2,0,"span",23),u["\u0275\u0275template"](2,ce,2,0,"span",23),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.kindergartenPresetForm.get("end").errors.required),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.kindergartenPresetForm.get("end").errors.mustAfter)}}function se(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span",22),u["\u0275\u0275text"](1,"required"),u["\u0275\u0275elementEnd"]())}function me(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275template"](1,se,2,0,"span",23),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.kindergartenPresetForm.get("duration").errors.required)}}var pe,ve,ue=((ve=function(){function t(n,a,r){e(this,t),this.dialogService=n,this.appointmentService=a,this.fb=r,this.selectedMoment=new Date,this.isInvalidControl=F.a,this.isStarted=!1,this.actionText="START"}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.toddlerPresetForm=this.fb.group({selectedMoments:["",[O.A.minLength(2),O.A.maxLength(2),O.A.required]],start:[c().startOf("day").toDate(),O.A.required],end:[c().add(2,"day").startOf("day").toDate(),O.A.required],duration:[20,O.A.required]},{validators:[Object(A.a)("start","end")]}),this.kindergartenPresetForm=this.fb.group({selectedMoments:["",[O.A.minLength(2),O.A.maxLength(2),O.A.required]],start:[c().startOf("day").toDate(),O.A.required],end:[c().add(2,"day").startOf("day").toDate(),O.A.required],duration:[20,O.A.required]},{validators:[Object(A.a)("start","end")]}),this.presetForm=this.fb.group({toddler:this.toddlerPresetForm,kindergarten:this.kindergartenPresetForm}),this.appointmentService.GetCurrentPreset().subscribe((function(t){console.log(t),e.presetForm.reset(t),e.isStarted=!t.isClosed,e._setActionText()}))}},{key:"onToogleChange",value:function(e){var t=this;this.isStarted=e,1==e&&(this.onSubmit(),this.presetForm.invalid&&setTimeout((function(e){t.isStarted=!1}),100)),0==e&&this.dialogService.open(S.a,{context:{title:"Are you going to close?"}}).onClose.subscribe((function(e){0==e&&(t.isStarted=!0,t.actionText="CLOSE")})),this._setActionText()}},{key:"_setActionText",value:function(){this.actionText=1==this.isStarted?"CLOSE":"START"}},{key:"onSubmit",value:function(){if(this.presetForm.markAllAsTouched(),this.presetForm.valid){var e=Object.assign({},this.presetForm.value);this.appointmentService.StartPreset(e).subscribe((function(e){}))}}}]),t}()).\u0275fac=function(e){return new(e||ve)(u["\u0275\u0275directiveInject"](h.F),u["\u0275\u0275directiveInject"](g.a),u["\u0275\u0275directiveInject"](O.e))},ve.\u0275cmp=u["\u0275\u0275defineComponent"]({type:ve,selectors:[["ngx-preset"]],decls:104,vars:49,consts:[[1,"d-flex","align-items-center"],["status","basic","labelPosition","start",1,"ml-auto",3,"checked","checkedChange"],[1,"row",3,"formGroup","ngSubmit"],[1,"col-md-6"],["formGroupName","toddler"],[1,"form-group","row","align-items-center"],[1,"label","col-lg-3"],[1,"col-lg-9"],["nbInput","","formControlName","selectedMoments",3,"selectMode","owlDateTimeTrigger","owlDateTime"],[4,"ngIf"],[3,"pickerType"],["dt3",""],["disabled","","nbInput","","formControlName","start",3,"owlDateTimeTrigger","owlDateTime","status"],["dt",""],["nbInput","","formControlName","end",3,"owlDateTimeTrigger","owlDateTime","status"],["dt2",""],["formControlName","duration",3,"status"],[3,"value"],["formGroupName","kindergarten"],["dt_kinder_3",""],["dt_kinder",""],["dt_kinder_2",""],[1,"error-text"],["class","error-text",4,"ngIf"]],template:function(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-card"),u["\u0275\u0275elementStart"](1,"nb-card-header"),u["\u0275\u0275elementStart"](2,"div",0),u["\u0275\u0275text"](3," Preset "),u["\u0275\u0275elementStart"](4,"nb-toggle",1),u["\u0275\u0275listener"]("checkedChange",(function(e){return t.isStarted=e}))("checkedChange",(function(e){return t.onToogleChange(e)})),u["\u0275\u0275text"](5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"nb-card-body"),u["\u0275\u0275elementStart"](7,"form",2),u["\u0275\u0275listener"]("ngSubmit",(function(){return t.onSubmit()})),u["\u0275\u0275elementStart"](8,"div",3),u["\u0275\u0275elementStart"](9,"nb-card"),u["\u0275\u0275elementStart"](10,"nb-card-header"),u["\u0275\u0275text"](11," For Toddlers "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"nb-card-body",4),u["\u0275\u0275elementStart"](13,"div",5),u["\u0275\u0275elementStart"](14,"label",6),u["\u0275\u0275text"](15," Date "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](16,"div",7),u["\u0275\u0275element"](17,"input",8),u["\u0275\u0275template"](18,X,3,0,"div",9),u["\u0275\u0275element"](19,"owl-date-time",10,11),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"div",5),u["\u0275\u0275elementStart"](22,"label",6),u["\u0275\u0275text"](23," Start Time"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](24,"div",7),u["\u0275\u0275element"](25,"input",12),u["\u0275\u0275template"](26,$,2,1,"div",9),u["\u0275\u0275element"](27,"owl-date-time",10,13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](29,"div",5),u["\u0275\u0275elementStart"](30,"label",6),u["\u0275\u0275text"](31," End Time"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](32,"div",7),u["\u0275\u0275element"](33,"input",14),u["\u0275\u0275template"](34,te,3,2,"div",9),u["\u0275\u0275element"](35,"owl-date-time",10,15),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](37,"div",5),u["\u0275\u0275elementStart"](38,"label",6),u["\u0275\u0275text"](39," Duration"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](40,"div",7),u["\u0275\u0275elementStart"](41,"nb-select",16),u["\u0275\u0275elementStart"](42,"nb-option",17),u["\u0275\u0275text"](43,"10"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](44,"nb-option",17),u["\u0275\u0275text"](45,"20"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](46,"nb-option",17),u["\u0275\u0275text"](47,"30"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](48,"nb-option",17),u["\u0275\u0275text"](49,"40"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](50,"nb-option",17),u["\u0275\u0275text"](51,"50"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](52,"nb-option",17),u["\u0275\u0275text"](53,"60"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](54," minutes "),u["\u0275\u0275template"](55,ae,2,1,"div",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](56,"div",3),u["\u0275\u0275elementStart"](57,"nb-card"),u["\u0275\u0275elementStart"](58,"nb-card-header"),u["\u0275\u0275text"](59," For Kindergarten "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](60,"nb-card-body",18),u["\u0275\u0275elementStart"](61,"div",5),u["\u0275\u0275elementStart"](62,"label",6),u["\u0275\u0275text"](63," Date "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](64,"div",7),u["\u0275\u0275element"](65,"input",8),u["\u0275\u0275template"](66,re,3,0,"div",9),u["\u0275\u0275element"](67,"owl-date-time",10,19),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](69,"div",5),u["\u0275\u0275elementStart"](70,"label",6),u["\u0275\u0275text"](71," Start Time"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](72,"div",7),u["\u0275\u0275element"](73,"input",12),u["\u0275\u0275template"](74,oe,2,1,"div",9),u["\u0275\u0275element"](75,"owl-date-time",10,20),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](77,"div",5),u["\u0275\u0275elementStart"](78,"label",6),u["\u0275\u0275text"](79," End Time"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](80,"div",7),u["\u0275\u0275element"](81,"input",14),u["\u0275\u0275template"](82,de,3,2,"div",9),u["\u0275\u0275element"](83,"owl-date-time",10,21),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](85,"div",5),u["\u0275\u0275elementStart"](86,"label",6),u["\u0275\u0275text"](87," Duration"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](88,"div",7),u["\u0275\u0275elementStart"](89,"nb-select",16),u["\u0275\u0275elementStart"](90,"nb-option",17),u["\u0275\u0275text"](91,"10"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](92,"nb-option",17),u["\u0275\u0275text"](93,"20"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](94,"nb-option",17),u["\u0275\u0275text"](95,"30"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](96,"nb-option",17),u["\u0275\u0275text"](97,"40"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](98,"nb-option",17),u["\u0275\u0275text"](99,"50"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](100,"nb-option",17),u["\u0275\u0275text"](101,"60"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](102," minutes "),u["\u0275\u0275template"](103,me,2,1,"div",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275reference"](20),a=u["\u0275\u0275reference"](28),r=u["\u0275\u0275reference"](36),i=u["\u0275\u0275reference"](68),o=u["\u0275\u0275reference"](76),l=u["\u0275\u0275reference"](84);u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("checked",t.isStarted),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](t.actionText),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("formGroup",t.presetForm),u["\u0275\u0275advance"](10),u["\u0275\u0275property"]("selectMode","range")("owlDateTimeTrigger",n)("owlDateTime",n),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.toddlerPresetForm,"selectedMoments")),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("pickerType","calendar"),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("owlDateTimeTrigger",a)("owlDateTime",a)("status",t.isInvalidControl(t.toddlerPresetForm,"start")?"danger":"basic"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.toddlerPresetForm,"start")),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("pickerType","timer"),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("owlDateTimeTrigger",r)("owlDateTime",r)("status",t.isInvalidControl(t.toddlerPresetForm,"end")?"danger":"basic"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.toddlerPresetForm,"end")),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("pickerType","timer"),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("status",t.isInvalidControl(t.toddlerPresetForm,"duration")?"danger":"basic"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("value",10),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("value",20),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("value",30),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("value",40),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("value",50),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("value",60),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.toddlerPresetForm,"duration")),u["\u0275\u0275advance"](10),u["\u0275\u0275property"]("selectMode","range")("owlDateTimeTrigger",i)("owlDateTime",i),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.kindergartenPresetForm,"selectedMoments")),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("pickerType","calendar"),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("owlDateTimeTrigger",o)("owlDateTime",o)("status",t.isInvalidControl(t.kindergartenPresetForm,"start")?"danger":"basic"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.kindergartenPresetForm,"start")),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("pickerType","timer"),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("owlDateTimeTrigger",l)("owlDateTime",l)("status",t.isInvalidControl(t.kindergartenPresetForm,"end")?"danger":"basic"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.kindergartenPresetForm,"end")),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("pickerType","timer"),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("status",t.isInvalidControl(t.kindergartenPresetForm,"duration")?"danger":"basic"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("value",10),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("value",20),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("value",30),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("value",40),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("value",50),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("value",60),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.kindergartenPresetForm,"duration"))}},directives:[h.t,h.w,h.wb,h.s,O.C,O.s,O.j,O.k,h.L,O.c,j.b,O.r,O.h,j.d,l.o,j.a,h.fb,h.bb],styles:[".error-text[_ngcontent-%COMP%]{color:red}"]}),ve),he=((pe=function(){function t(n){e(this,t),this._eref=n,this.confirmClick=new u.EventEmitter,this.moment=c,this.isflipped=!1,this.isConfirmed=!1}return n(t,[{key:"ngOnInit",value:function(){this.isConfirmed=Math.floor(10*Math.random())%2!=0}},{key:"onClick",value:function(e){this._eref.nativeElement.contains(e.target)||(this.isflipped=!1)}},{key:"onConfirm",value:function(){this.confirmClick.emit({start:this.start,end:this.end})}},{key:"formateTime",get:function(){return c(this.start).format("LT")}}]),t}()).\u0275fac=function(e){return new(e||pe)(u["\u0275\u0275directiveInject"](u.ElementRef))},pe.\u0275cmp=u["\u0275\u0275defineComponent"]({type:pe,selectors:[["ngx-preset-slot-item"]],hostBindings:function(e,t){1&e&&u["\u0275\u0275listener"]("click",(function(e){return t.onClick(e)}),!1,u["\u0275\u0275resolveDocument"])},inputs:{start:"start",end:"end",isConfirmed:["confirmed","isConfirmed"]},outputs:{confirmClick:"confirmClick"},decls:13,vars:6,consts:[[3,"showToggleButton","flipped"],["nbButton","","status","primary",3,"disabled","click"],[2,"position","relative"],[1,"small-text"],["nbButton","","status","success",3,"disabled","click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"nb-flip-card",0),u["\u0275\u0275elementStart"](1,"nb-card-front"),u["\u0275\u0275elementStart"](2,"nb-card"),u["\u0275\u0275elementStart"](3,"nb-card-body"),u["\u0275\u0275elementStart"](4,"button",1),u["\u0275\u0275listener"]("click",(function(){return t.isflipped=!t.isflipped})),u["\u0275\u0275text"](5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"nb-card-back"),u["\u0275\u0275elementStart"](7,"nb-card"),u["\u0275\u0275elementStart"](8,"nb-card-body",2),u["\u0275\u0275elementStart"](9,"div",3),u["\u0275\u0275text"](10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"button",4),u["\u0275\u0275listener"]("click",(function(){return t.onConfirm()})),u["\u0275\u0275text"](12," Confirm "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275property"]("showToggleButton",!1)("flipped",t.isflipped),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("disabled",t.isConfirmed),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",t.formateTime," "),u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate1"](" ",t.formateTime," "),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("disabled",t.isConfirmed))},directives:[h.G,h.v,h.t,h.s,h.p,h.r],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px}[_nghost-%COMP%]   nb-flip-card[_ngcontent-%COMP%]{margin-bottom:5px;margin-right:5px;width:100px}[_nghost-%COMP%]   .small-text[_ngcontent-%COMP%]{position:absolute;top:-1px;left:2px;font-size:xx-small;font-weight:700;color:#0555e0}"]}),pe);function fe(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"ngx-preset-slot-item",18),u["\u0275\u0275listener"]("confirmClick",(function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).onConfirm(e)})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()}if(2&e){var a=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("start",a.start)("end",a.end)("confirmed",a.booked)}}function we(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"div",8),u["\u0275\u0275elementStart"](2,"div",9),u["\u0275\u0275elementStart"](3,"label"),u["\u0275\u0275text"](4," Preset Type"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"div",5),u["\u0275\u0275elementStart"](6,"nb-select",10),u["\u0275\u0275listener"]("selectedChange",(function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().onPresetTypeChange(e)})),u["\u0275\u0275elementStart"](7,"nb-option",11),u["\u0275\u0275text"](8,"Toddler"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"nb-option",11),u["\u0275\u0275text"](10,"Kindergarten"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"div",12),u["\u0275\u0275elementStart"](12,"div",9),u["\u0275\u0275elementStart"](13,"label"),u["\u0275\u0275text"](14,"Date"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"div",5),u["\u0275\u0275elementStart"](16,"input",13),u["\u0275\u0275listener"]("ngModelChange",(function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().selectedDate=e})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](17,"owl-date-time",14,15),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"div",16),u["\u0275\u0275template"](20,fe,2,3,"ng-container",17),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()}if(2&e){var a=u["\u0275\u0275reference"](18),r=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("selected",r.selectedPresetType),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("value",r.ToddlerType),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("value",r.KindergartenType),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("owlDateTimeTrigger",a)("owlDateTime",a)("ngModel",r.selectedDate)("min",r.min)("max",r.max),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("pickerType","calendar"),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngForOf",r.slots)}}var ge,be,ye,ke=((ge=function(){function t(n,a,r,i,o,l){e(this,t),this.route=n,this.appointmentService=a,this.dialogService=r,this.toastrService=i,this.router=o,this.userService=l,this.ToddlerType=b.d.Toddler,this.KindergartenType=b.d.Kindergarten,this.isEditmode=!0,this.selectedDate=c().toDate(),this.min=c().toDate(),this.max=c().toDate(),this.selectedPresetType=b.d.Toddler,this.isParentTeacherSelected=!1}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.appointmentService.GetCurrentPreset().subscribe((function(t){e.currentPresetInfo=t})),this.isEditmode?this.route.paramMap.pipe(Object(y.a)((function(t){return e.appointmentId=Number(t.get("appointment_id")),Object(x.a)({currentPreset:e.appointmentService.GetCurrentPreset(),presetAppointments:e.appointmentService.GetPresetAppointmentsFromAppointment(e.appointmentId)})}))).subscribe((function(t){var n=t.currentPreset,a=t.presetAppointments;console.log(a),e.currentPresetInfo=n,console.log(e.currentPresetInfo),e.appoinment=a.find((function(t){return t.id==e.appointmentId})),console.log(e.appoinment),e.appoinment&&(e.selectedDate=e.appoinment.start,e.selectedPresetType=e.appoinment.presetType,e.selectedTeacher=e.appoinment.teacher,e.selectedParent=e.appoinment.parent,e.isParentTeacherSelected=!0,e.min=e.currentPresetInfo[e.selectedPresetType].selectedMoments[0],e.max=e.currentPresetInfo[e.selectedPresetType].selectedMoments[1],e.GenerateSlotsInfo(a))})):Object(x.a)({currentPreset:this.appointmentService.GetCurrentPreset(),users:this.userService.getAllUsers()}).subscribe((function(t){e.currentPresetInfo=t.currentPreset,e.min=e.currentPresetInfo[e.selectedPresetType].selectedMoments[0],e.max=e.currentPresetInfo[e.selectedPresetType].selectedMoments[1];var n=t.users;e.teachers=[],e.parents=[],n.forEach((function(t){t.role==m.a.Teacher&&e.teachers.push(t),t.role==m.a.Parent&&e.parents.push(t)}))}))}},{key:"_generateslotsInfo",value:function(e,t){var n,a,r,i,o,l={};n=c(this.currentPresetInfo[t].selectedMoments[0]).dayOfYear(),a=c(this.currentPresetInfo[t].selectedMoments[1]).dayOfYear(),r=c(this.currentPresetInfo[t].start),i=c(this.currentPresetInfo[t].end),o=this.currentPresetInfo[t].duration;for(var d=function(n){l[n]=[];for(var a=function(a){var r=e.find((function(e){var r=c(e.start);return r.dayOfYear()==n&&r.isSame(a,"hour")&&r.isSame(a,"minute")&&e.presetType==t})),i={start:a.toDate(),end:a.clone().add(o,"minutes").toDate(),booked:!1};l[n].push(i),r&&(l[n].booked=!0)},d=r.clone();d.isBefore(i,"minutes")&&d.isSame(i,"year");d.add(o,"minutes"))a(d)},s=n;s<=a;s++)d(s);return l}},{key:"GenerateSlotsInfo",value:function(e){this.slotsInfo={},this.slotsInfo[this.KindergartenType]=this._generateslotsInfo(e,this.KindergartenType),this.slotsInfo[this.ToddlerType]=this._generateslotsInfo(e,this.ToddlerType)}},{key:"back",value:function(){}},{key:"onConfirm",value:function(e){var t=this,n=c(e.start),a=c(e.end);this.dialogService.open(S.a,{context:{title:"Are you sure?"}}).onClose.subscribe((function(e){1==e&&(t.isEditmode?(t.appoinment.presetType=t.selectedPresetType,t.appoinment.start=c(t.selectedDate).hour(n.hour()).minute(n.minute()).toDate(),t.appoinment.end=c(t.selectedDate).hour(a.hour()).minute(a.minute()).toDate(),t.appointmentService.UpdateEventById(t.appoinment).subscribe((function(e){t.toastrService.success("Updated the Appointment","Success"),t.router.navigate(["/appointment/"+t.appoinment.parent.id])}))):(t.appoinment=t.appointmentService.createBlankAppointment(),t.appoinment.title="".concat(t.selectedTeacher.first_name," ").concat(t.selectedTeacher.last_name," & ").concat(t.selectedParent.last_name," (PRESET)"),t.appoinment.type=b.b.PRESET,t.appoinment.presetType=t.selectedPresetType,t.appoinment.start=c(t.selectedDate).hour(n.hour()).minute(n.minute()).toDate(),t.appoinment.end=c(t.selectedDate).hour(a.hour()).minute(a.minute()).toDate(),t.appointmentService.CreateEvent(t.appoinment).subscribe((function(e){t.toastrService.success("Registered the New Appointment","Success"),t.router.navigate(["/appointment/"+t.appoinment.parent.id])}))))}))}},{key:"onPresetTypeChange",value:function(e){this.selectedPresetType=e,console.log(this.currentPresetInfo),this.min=this.currentPresetInfo[this.selectedPresetType].selectedMoments[0],this.max=this.currentPresetInfo[this.selectedPresetType].selectedMoments[1]}},{key:"onTeacherChange",value:function(e){var t=this;this._setIsParentTeacherSelected(),this.isParentTeacherSelected&&this.appointmentService.GetPresetAppointmentsByUserIdList([this.selectedParent.id,this.selectedTeacher.id]).subscribe((function(e){t.GenerateSlotsInfo(e)}))}},{key:"onParentChange",value:function(e){var t=this;this._setIsParentTeacherSelected(),this.isParentTeacherSelected&&this.appointmentService.GetPresetAppointmentsByUserIdList([this.selectedParent.id,this.selectedTeacher.id]).subscribe((function(e){t.GenerateSlotsInfo(e)}))}},{key:"_setIsParentTeacherSelected",value:function(){this.isParentTeacherSelected=!(!this.selectedTeacher||!this.selectedParent)}},{key:"title",get:function(){return this.isEditmode?"Edit Preset Appointment":"Create Preset Appointment"}},{key:"slots",get:function(){return this.slotsInfo[this.selectedPresetType][c(this.selectedDate).dayOfYear()]}}]),t}()).\u0275fac=function(e){return new(e||ge)(u["\u0275\u0275directiveInject"](d.a),u["\u0275\u0275directiveInject"](g.a),u["\u0275\u0275directiveInject"](h.F),u["\u0275\u0275directiveInject"](h.vb),u["\u0275\u0275directiveInject"](d.c),u["\u0275\u0275directiveInject"](v.a))},ge.\u0275cmp=u["\u0275\u0275defineComponent"]({type:ge,selectors:[["ngx-appointment-preset-edit"]],inputs:{isEditmode:["editmode","isEditmode"]},decls:19,vars:10,consts:[[1,"d-flex","align-items-center"],["nbTooltip","Back","nbButton","","ghost","",3,"click"],["icon","arrow-back-outline",2,"color","white"],[1,"form-group","row","align-items-center"],[1,"label","col-sm-3"],[1,"col-sm-9"],[3,"users","title","ngModel","disabled","ngModelChange"],[4,"ngIf"],[1,"row"],[1,"col-sm-3"],[2,"min-width","214px",3,"selected","selectedChange"],[3,"value"],[1,"row","mt-4"],["nbInput","",3,"owlDateTimeTrigger","owlDateTime","ngModel","min","max","ngModelChange"],[3,"pickerType"],["dt",""],[1,"d-flex","flex-wrap","align-items-center","mt-4"],[4,"ngFor","ngForOf"],[3,"start","end","confirmed","confirmClick"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"nb-card"),u["\u0275\u0275elementStart"](1,"nb-card-header"),u["\u0275\u0275elementStart"](2,"div",0),u["\u0275\u0275elementStart"](3,"button",1),u["\u0275\u0275listener"]("click",(function(){return t.back()})),u["\u0275\u0275elementStart"](4,"nb-icon",2),u["\u0275\u0275text"](5,"arrow-back-outline"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"nb-card-body"),u["\u0275\u0275elementStart"](8,"div",3),u["\u0275\u0275elementStart"](9,"label",4),u["\u0275\u0275text"](10," Teacher"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"div",5),u["\u0275\u0275elementStart"](12,"ngx-user-select",6),u["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectedTeacher=e}))("ngModelChange",(function(e){return t.onTeacherChange(e)})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"div",3),u["\u0275\u0275elementStart"](14,"label",4),u["\u0275\u0275text"](15," Parent"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](16,"div",5),u["\u0275\u0275elementStart"](17,"ngx-user-select",6),u["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectedParent=e}))("ngModelChange",(function(e){return t.onParentChange(e)})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](18,we,21,10,"ng-container",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate1"](" ",t.title," "),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("users",t.teachers)("title","Select Teacher")("ngModel",t.selectedTeacher)("disabled",t.isEditmode),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("users",t.parents)("title","Select Parent")("ngModel",t.selectedParent)("disabled",t.isEditmode),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.isParentTeacherSelected))},directives:[h.t,h.w,h.p,h.I,h.s,M.a,O.r,O.u,l.o,h.fb,h.bb,h.L,j.b,O.c,j.d,j.a,l.n,he],styles:[""]}),ge),xe=[{path:"preset",component:ue},{path:"new/preset",component:(be=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}(),be.\u0275fac=function(e){return new(e||be)},be.\u0275cmp=u["\u0275\u0275defineComponent"]({type:be,selectors:[["ngx-appointment-preset-create"]],decls:1,vars:1,consts:[[3,"editmode"]],template:function(e,t){1&e&&u["\u0275\u0275element"](0,"ngx-appointment-preset-edit",0),2&e&&u["\u0275\u0275property"]("editmode",!1)},directives:[ke],styles:[""]}),be)},{path:"new",component:Y},{path:"preset/:appointment_id",component:ke},{path:":id",component:P},{path:":id/:appointment_id",component:J},{path:"",component:f}],Se=((ye=function t(){e(this,t)}).\u0275mod=u["\u0275\u0275defineNgModule"]({type:ye}),ye.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(e){return new(e||ye)},imports:[[d.g.forChild(xe)],d.g]}),ye),Ee=r("WLya"),Ce=r("PCNd");function Ie(){return Object(Ee.adapterFactory)(c)}var Te,De=((Te=function t(){e(this,t)}).\u0275mod=u["\u0275\u0275defineNgModule"]({type:Te}),Te.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(e){return new(e||Te)},imports:[[l.c,Ce.a,Se,w.b.forRoot({provide:w.f,useFactory:Ie}),h.q,h.K,h.x,h.Bb,h.M,h.sb,h.ub,h.gb,h.xb,j.c,j.e,Ce.a,s.c,O.x,O.l]]}),Te)}}])}();