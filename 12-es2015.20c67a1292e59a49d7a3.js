(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Klii:function(e,t,n){"use strict";n.r(t),n.d(t,"ExchangeLibraryModule",(function(){return j}));var i=n("ofXK"),r=n("tyNb"),o=n("AytR"),a=n("fXoL"),l=n("tk/3");let c=(()=>{class e{constructor(e){this.httpClient=e,this.api_url=o.a.API_URL}getAllBooks(){return this.httpClient.get(this.api_url+"/exchangelibraries/")}addBook(e){let t=e;const n=new FormData;return Object.keys(e).forEach(t=>{n.append(t,e[t])}),t.pictureFile&&n.set("picture",t.pictureFile),this.httpClient.post(this.api_url+"/exchangelibraries/",n)}deleteBook(e){return this.httpClient.delete(`${this.api_url}/exchangelibraries/${e.id}/`)}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](l.c))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var s=n("NdX7"),d=n("aceb"),p=n("3Pt+"),u=n("LJPP"),m=n("CHuZ"),b=n("sYmb");function h(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"span",18),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](2,1,"required")))}function g(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275template"](1,h,3,3,"span",17),a["\u0275\u0275elementEnd"]()),2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.bookForm.get("title").errors.required)}}const v=function(e){return{"background-image":e}};let f=(()=>{class e{constructor(e){this.fb=e,this.submitEvent=new a.EventEmitter,this.isInvalidControl=m.a}ngOnInit(){this.bookForm=this.fb.group({title:["",p.B.required],picture:["",p.B.required],pictureFile:void 0,comment:["",p.B.nullValidator],status:[u.a.PRESENT,p.B.nullValidator]}),this.initdata?this.bookForm.reset(this.initdata):this.initdata={id:void 0,title:void 0,picture:void 0,status:u.a.PRESENT}}changeListener(e){if(console.log(e),e.target.files&&e.target.files[0]){let t=new FileReader;t.onload=e=>{this.bookForm.get("picture").setValue(e.target.result)},this.bookForm.get("pictureFile").setValue(e.target.files[0]),t.readAsDataURL(e.target.files[0])}}get picture(){return this.bookForm.get("picture").value}onFormSubmit(){this.bookForm.markAllAsTouched(),this.bookForm.valid&&(this.book=Object.assign(this.initdata,this.bookForm.value),this.submitEvent.emit(this.book))}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](p.e))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-book-form"]],inputs:{initdata:"initdata"},outputs:{submitEvent:"onSubmit"},decls:30,vars:21,consts:[[1,"row","justify-content-center"],[1,"col-lg-6"],[3,"formGroup","ngSubmit"],[1,"form-group","row","justify-content-center"],[1,"col-sm-4","avatar"],[1,"content",3,"ngStyle"],[1,"select-file"],[2,"position","relative","height","100%"],["icon","edit-outline",2,"color","white"],["type","file","accept","image/*",1,"file-input",3,"change"],[1,"form-group"],[1,"label","mr-4"],["nbInput","","type","text","formControlName","title",3,"placeholder","status"],[4,"ngIf"],[1,"label"],["nbInput","","rows","5","fullWidth","","formControlName","comment",3,"placeholder"],["nbInput","","type","submit","value","Add",2,"float","right"],["class","error-text",4,"ngIf"],[1,"error-text"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"nb-card"),a["\u0275\u0275elementStart"](3,"nb-card-header"),a["\u0275\u0275text"](4),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"nb-card-body"),a["\u0275\u0275elementStart"](7,"form",2),a["\u0275\u0275listener"]("ngSubmit",(function(){return t.onFormSubmit()})),a["\u0275\u0275elementStart"](8,"div",3),a["\u0275\u0275elementStart"](9,"div",4),a["\u0275\u0275element"](10,"div",5),a["\u0275\u0275elementStart"](11,"div",6),a["\u0275\u0275elementStart"](12,"div",7),a["\u0275\u0275elementStart"](13,"nb-icon",8),a["\u0275\u0275text"](14,"arrow-back-outline"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"input",9),a["\u0275\u0275listener"]("change",(function(e){return t.changeListener(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",10),a["\u0275\u0275elementStart"](17,"label",11),a["\u0275\u0275text"](18),a["\u0275\u0275pipe"](19,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](20,"input",12),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275template"](22,g,2,1,"div",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](23,"div",10),a["\u0275\u0275elementStart"](24,"label",14),a["\u0275\u0275text"](25),a["\u0275\u0275pipe"](26,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](27,"textarea",15),a["\u0275\u0275pipe"](28,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](29,"input",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](5,9,"New Book")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("formGroup",t.bookForm),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](19,v,"url("+t.picture+")")),a["\u0275\u0275advance"](8),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](19,11,"Title")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](21,13,"Title")),a["\u0275\u0275property"]("status",t.isInvalidControl(t.bookForm,"title")?"danger":"basic"),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.isInvalidControl(t.bookForm,"title")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](26,15,"Comment")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](28,17,"comment")))},directives:[d.u,d.x,d.t,p.D,p.s,p.j,i.p,d.I,d.L,p.c,p.r,p.h,i.o],pipes:[b.c],styles:[".avatar[_ngcontent-%COMP%]{max-width:250px}.avatar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;position:relative;padding-top:100%;background-size:cover;background-repeat:no-repeat;border-radius:10px;box-shadow:0 0 5px .5px #fff}.avatar[_ngcontent-%COMP%]   .select-file[_ngcontent-%COMP%]{position:absolute;right:-10px;top:40%;width:50px;height:50px}.avatar[_ngcontent-%COMP%]   .select-file[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;opacity:0;cursor:pointer}.avatar[_ngcontent-%COMP%]   .select-file[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{width:100%;height:100%;padding:10px;border-radius:50%;background-color:#2e3e6d;cursor:pointer}.error-text[_ngcontent-%COMP%]{color:red}"]}),e})(),x=(()=>{class e{constructor(e,t,n,i){this.exchangeLibraryService=e,this.toastSerivce=t,this.route=n,this.router=i}ngOnInit(){}onSubmit(e){this.exchangeLibraryService.addBook(e).subscribe(e=>{this.toastSerivce.success("New Book has been added","success"),this.back()})}back(){this.router.navigate([".."],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](c),a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](r.a),a["\u0275\u0275directiveInject"](r.c))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-add-book"]],decls:10,vars:6,consts:[["nbButton","","ghost","",3,"nbTooltip","click"],["icon","arrow-back-outline",2,"color","white"],[3,"onSubmit"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"nb-card"),a["\u0275\u0275elementStart"](1,"nb-card-header"),a["\u0275\u0275elementStart"](2,"button",0),a["\u0275\u0275listener"]("click",(function(){return t.back()})),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementStart"](4,"nb-icon",1),a["\u0275\u0275text"](5,"arrow-back-outline"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](6),a["\u0275\u0275pipe"](7,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"nb-card-body"),a["\u0275\u0275elementStart"](9,"ngx-book-form",2),a["\u0275\u0275listener"]("onSubmit",(function(e){return t.onSubmit(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("nbTooltip",a["\u0275\u0275pipeBind1"](3,2,"Back")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](7,4,"New Book")," "))},directives:[d.u,d.x,d.q,d.ub,d.I,d.t,f],pipes:[b.c],styles:[""]}),e})();var S=n("cSNu");function k(e,t){1&e&&a["\u0275\u0275element"](0,"nb-badge",21)}function y(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",22),a["\u0275\u0275elementStart"](1,"div",23),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"nb-user",24),a["\u0275\u0275elementEnd"]()),2&e){const e=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,3,"Child")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("picture",e.child.photo)("name",e.child.first_name+" "+e.child.last_name)}}const E=function(e){return{"background-image":e}};function I(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"nb-list-item",8),a["\u0275\u0275elementStart"](1,"div",9),a["\u0275\u0275elementStart"](2,"div",10),a["\u0275\u0275elementStart"](3,"div",11),a["\u0275\u0275element"](4,"div",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"div",13),a["\u0275\u0275elementStart"](6,"div",14),a["\u0275\u0275text"](7),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275elementStart"](9,"span",15),a["\u0275\u0275text"](10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"div",16),a["\u0275\u0275elementStart"](12,"button",17),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](e);const n=t.$implicit;return a["\u0275\u0275nextContext"]().onDeleteClick(n)})),a["\u0275\u0275text"](13),a["\u0275\u0275pipe"](14,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](15,k,1,0,"nb-badge",18),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",19),a["\u0275\u0275text"](17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](18,y,5,5,"div",20),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](11,E,"url("+e.picture+")")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](8,7,"Title"),": "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](e.title),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](14,9,"DELETE"),""),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",n.isBooked(e)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",e.comment," "),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.isBooked(e))}}const w=[{path:"",component:(()=>{class e{constructor(e,t,n,i,r){this.exchangeLibraryService=e,this.router=t,this.route=n,this.dialogService=i,this.toastService=r}ngOnInit(){this.exchangeLibraryService.getAllBooks().subscribe(e=>{this.books=e,this.filteredbooks=this.books})}onSearchWordChange(e){this.filteredbooks=this.books.filter(e=>e.title.includes(this.searchWord))}newExchangeLibraryClick(){this.router.navigate(["new"],{relativeTo:this.route})}onDeleteClick(e){this.dialogService.open(S.a,{context:{title:"Are you sure?"}}).onClose.subscribe(t=>{1==t&&this.exchangeLibraryService.deleteBook(e).subscribe(t=>{this.books=this.books.reduce((t,n)=>(n.id!=e.id&&t.push(n),t),[]),this.filteredbooks=this.books,this.toastService.success("Book has been deleted","success")})})}isBooked(e){return e.status==u.a.RENTED}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](c),a["\u0275\u0275directiveInject"](r.c),a["\u0275\u0275directiveInject"](r.a),a["\u0275\u0275directiveInject"](d.G),a["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-exchange-library"]],decls:18,vars:14,consts:[[1,"d-flex","align-items-center","justify-content-between"],["nbButton","","status","info",3,"nbTooltip","click"],[1,"search-box","mb-2"],[2,"display","flex","justify-content","flex-end"],["type","text","nbInput","",3,"ngModel","placeholder","ngModelChange"],["type","button","nbButton","","status","primary"],["icon","search-outline",1,"action-icon"],["style","position: relative;",4,"ngFor","ngForOf"],[2,"position","relative"],[1,"ml-3","mt-2","w-100"],[1,"d-flex","flex-wrap","align-items-center"],[1,"avatar","ml-2"],[1,"content",3,"ngStyle"],[1,"text-1","ml-2"],[1,"date-text"],[1,"text-primary"],[1,"ml-auto"],["nbButton","","ghost","",3,"click"],["text","Booked","status","danger","position","top left",4,"ngIf"],[1,"mt-2","text-1"],["class","d-flex mt-2 flex-wrap align-items-center ",4,"ngIf"],["text","Booked","status","danger","position","top left"],[1,"d-flex","mt-2","flex-wrap","align-items-center"],[1,"text-1","date-text","mr-4"],[3,"picture","name"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"nb-card"),a["\u0275\u0275elementStart"](1,"nb-card-header"),a["\u0275\u0275elementStart"](2,"div",0),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementStart"](5,"button",1),a["\u0275\u0275listener"]("click",(function(){return t.newExchangeLibraryClick()})),a["\u0275\u0275pipe"](6,"translate"),a["\u0275\u0275text"](7),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"nb-card-body"),a["\u0275\u0275elementStart"](10,"div",2),a["\u0275\u0275elementStart"](11,"div",3),a["\u0275\u0275elementStart"](12,"input",4),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.searchWord=e}))("ngModelChange",(function(e){return t.onSearchWordChange(e)})),a["\u0275\u0275pipe"](13,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"button",5),a["\u0275\u0275element"](15,"nb-icon",6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"nb-list"),a["\u0275\u0275template"](17,I,19,13,"nb-list-item",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](4,6,"Exchange Library")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("nbTooltip",a["\u0275\u0275pipeBind1"](6,8,"New Book")),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](8,10,"New Book")," "),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](13,12,"Search by name")),a["\u0275\u0275property"]("ngModel",t.searchWord),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",t.filteredbooks))},directives:[d.u,d.x,d.q,d.ub,d.t,d.L,p.c,p.r,p.u,d.I,d.U,i.n,d.V,i.p,i.o,d.o,d.wb],pipes:[b.c],styles:[".avatar[_ngcontent-%COMP%]{width:50px;height:50px}.avatar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;position:relative;padding-top:100%;background-size:cover;background-repeat:no-repeat;border-radius:10px;box-shadow:0 0 5px .5px #fff}nb-list-item[_ngcontent-%COMP%]   .text-1[_ngcontent-%COMP%]{font-size:small;color:grey}nb-list-item[_ngcontent-%COMP%]   .date-text[_ngcontent-%COMP%]{font-size:medium}"]}),e})()},{path:"new",component:x}];let C=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.g.forChild(w)],r.g]}),e})();var B=n("p0MU");let j=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,i.c,d.y,d.M,d.W,p.l,p.y,d.r,d.K,d.vb,d.f,d.xb,d.p,B.a,C]]}),e})()},NdX7:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("cp0P"),r=n("fXoL"),o=n("sYmb"),a=n("aceb");let l=(()=>{class e{constructor(e,t){this.translateService=e,this.toastrService=t}success(e,t){Object(i.a)({msg:this.translateService.get(e),title:this.translateService.get(t)}).subscribe(e=>{this.toastrService.success(e.msg,e.title)})}show(e,t){Object(i.a)({msg:this.translateService.get(e),title:this.translateService.get(t)}).subscribe(e=>{this.toastrService.show(e.msg,e.title)})}info(e,t){Object(i.a)({msg:this.translateService.get(e),title:this.translateService.get(t)}).subscribe(e=>{this.toastrService.info(e.msg,e.title)})}warning(e,t){Object(i.a)({msg:this.translateService.get(e),title:this.translateService.get(t)}).subscribe(e=>{this.toastrService.warning(e.msg,e.title)})}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](o.d),r["\u0275\u0275inject"](a.rb))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);