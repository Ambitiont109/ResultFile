(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{MOo2:function(e,t,n){"use strict";n.r(t),n.d(t,"SchoolDocumentsModule",(function(){return x}));var o=n("ofXK"),r=n("tyNb"),l=n("B3Wl"),a=n("oeL9"),s=n("NdX7"),i=n("fXoL"),c=n("aceb"),d=n("/aQt"),m=n("XNiG"),u=n("AytR"),p=n("EwH2");function b(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"nb-option",3),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275property"]("value",e.value),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e.key)}}function f(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275element"](1,"ngx-file-upload",4),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("url",e.uploadUrl+e.Classroom+"/")("storage",e.storageClasrrom)("formDataName","url")}}function h(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275element"](1,"ngx-file-upload",4),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("url",e.uploadUrl+e.All+"/")("storage",e.storageAll)("formDataName","url")}}let g=(()=>{class e{constructor(e){this.documentService=e,this.onUploadedEvent=new i.EventEmitter,this.Classroom=a.a.Classroom,this.All=a.a.All,this.uploadStates=d.c,this.uploads=[],this.destroy$=new m.a,this.documentFor=a.a.All,this.uploadUrl=u.a.API_URL+"/upload/document/",this.selectList=Object.keys(a.a).map(e=>({key:e,value:a.a[e]})),this.storageClasrrom=new d.d({concurrentUploads:4}),this.storageAll=new d.d({concurrentUploads:4}),this.uploadedClassroomRequestIds=[],this.uploadedAllRequestIds=[],this.storageClasrrom.change().subscribe(e=>{console.log(e.length),e.forEach(e=>{e.isCompleted()&&(console.log(e),this.uploadedClassroomRequestIds.includes(e.requestId)||(console.log(e.data.response.body),this.uploadedClassroomRequestIds.push(e.requestId),this.onUploadedEvent.emit({documentFor:a.a.Classroom,data:e.data.response.body})))})}),this.storageAll.change().subscribe(e=>{console.log(e.length),e.forEach(e=>{e.isCompleted()&&(console.log(e),this.uploadedAllRequestIds.includes(e.requestId)||(console.log(e.data.response.body),this.uploadedAllRequestIds.push(e.requestId),this.onUploadedEvent.emit({documentFor:a.a.All,data:e.data.response.body})))})})}ngOnInit(){}selectChange(e){this.documentFor=e}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-add-document"]],outputs:{onUploadedEvent:"onUploaded"},decls:4,vars:4,consts:[[3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[3,"url","storage","formDataName"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"nb-select",0),i["\u0275\u0275listener"]("selectedChange",(function(e){return t.selectChange(e)})),i["\u0275\u0275template"](1,b,2,2,"nb-option",1),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](2,f,2,3,"div",2),i["\u0275\u0275template"](3,h,2,3,"div",2)),2&e&&(i["\u0275\u0275property"]("selected",t.documentFor),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.selectList),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.documentFor==t.Classroom),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.documentFor==t.All))},directives:[c.fb,o.n,o.o,c.bb,p.g],styles:[""]}),e})();var v=n("sYmb");function S(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"nb-list-item",12),i["\u0275\u0275elementStart"](1,"a",13),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"button",14),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"]().removeDocument(n)})),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275element"](5,"nb-icon",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("href",e.url,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.name,""),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("nbTooltip",i["\u0275\u0275pipeBind1"](4,3,"Remove Documents"))}}function E(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"nb-list-item",12),i["\u0275\u0275elementStart"](1,"a",13),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"button",14),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"]().removeDocument(n)})),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275element"](5,"nb-icon",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("href",e.url,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.name,""),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("nbTooltip",i["\u0275\u0275pipeBind1"](4,3,"Remove Documents"))}}const y=[{path:"",component:(()=>{class e{constructor(e,t){this.documentService=e,this.toastService=t,this.isAdd=!1}ngOnInit(){this.documents=[],this.documentService.getDocuments().subscribe(e=>{this.documents=e})}get forClassroomDocuments(){return this.documents.filter(e=>e.documentfor==a.a.Classroom)}get forAllDocuments(){return this.documents.filter(e=>e.documentfor==a.a.All)}onUploaded(e){this.documents.push({name:e.data.name,url:e.data.url,documentfor:e.documentFor})}removeDocument(e){this.documentService.deleteDocument(e.id).toPromise().then(t=>{this.toastService.success("Document has been deleted","success"),this.documents=this.documents.reduce((t,n)=>(n.id!=e.id&&t.push(n),t),[])})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.a),i["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-school-documents"]],decls:34,vars:13,consts:[[3,"showToggleButton","flipped"],[1,"d-flex","align-items-center"],[1,"ml-4"],["nbTooltip","Add Documents","nbTooltipStatus","primary","nbButton","","ghost","",3,"click"],["icon","file-add",2,"color","#aebcd8"],["fullWidth",""],["tabTitle","For Classrooms"],["class","contact",4,"ngFor","ngForOf"],["tabTitle","For All"],["nbButton","","ghost","",3,"nbTooltip","click"],["icon","arrow-back-outline",2,"color","white"],[3,"onUploaded"],[1,"contact"],["target","_blank",3,"href"],["nbTooltipStatus","primary","nbButton","","ghost","",3,"nbTooltip","click"],["icon","file-remove",2,"color","#aebcd8"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"nb-flip-card",0),i["\u0275\u0275elementStart"](1,"nb-card-front"),i["\u0275\u0275elementStart"](2,"nb-card"),i["\u0275\u0275elementStart"](3,"nb-card-header"),i["\u0275\u0275elementStart"](4,"div",1),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementStart"](7,"div",2),i["\u0275\u0275elementStart"](8,"button",3),i["\u0275\u0275listener"]("click",(function(){return t.isAdd=!0})),i["\u0275\u0275element"](9,"nb-icon",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"nb-card-body"),i["\u0275\u0275elementStart"](11,"nb-tabset",5),i["\u0275\u0275elementStart"](12,"nb-tab",6),i["\u0275\u0275elementStart"](13,"nb-card"),i["\u0275\u0275elementStart"](14,"nb-card-body"),i["\u0275\u0275elementStart"](15,"nb-list"),i["\u0275\u0275template"](16,S,6,5,"nb-list-item",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"nb-tab",8),i["\u0275\u0275elementStart"](18,"nb-card"),i["\u0275\u0275elementStart"](19,"nb-card-body"),i["\u0275\u0275elementStart"](20,"nb-list"),i["\u0275\u0275template"](21,E,6,5,"nb-list-item",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"nb-card-back"),i["\u0275\u0275elementStart"](23,"nb-card"),i["\u0275\u0275elementStart"](24,"nb-card-header"),i["\u0275\u0275elementStart"](25,"div",1),i["\u0275\u0275elementStart"](26,"button",9),i["\u0275\u0275listener"]("click",(function(){return t.isAdd=!1})),i["\u0275\u0275pipe"](27,"translate"),i["\u0275\u0275elementStart"](28,"nb-icon",10),i["\u0275\u0275text"](29,"arrow-back-outline"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](30),i["\u0275\u0275pipe"](31,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](32,"nb-card-body"),i["\u0275\u0275elementStart"](33,"ngx-add-document",11),i["\u0275\u0275listener"]("onUploaded",(function(e){return t.onUploaded(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("showToggleButton",!1)("flipped",t.isAdd),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](6,7,"School Documents ")," "),i["\u0275\u0275advance"](11),i["\u0275\u0275property"]("ngForOf",t.forClassroomDocuments),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",t.forAllDocuments),i["\u0275\u0275advance"](5),i["\u0275\u0275propertyInterpolate"]("nbTooltip",i["\u0275\u0275pipeBind1"](27,9,"Back")),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](31,11,"Add School Documents")," "))},directives:[c.H,c.w,c.u,c.x,c.q,c.ub,c.I,c.t,c.nb,c.mb,c.U,o.n,c.s,g,c.V],pipes:[v.c],styles:[".contact[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.contact[_ngcontent-%COMP%]:first-child{border-top:none}"]}),e})()}];let I=(()=>{class e{}return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.g.forChild(y)],r.g]}),e})();var C=n("kvL/"),w=n("p0MU");let x=(()=>{class e{}return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.c,I,c.y,c.W,c.gb,c.K,c.r,c.vb,c.ob,p.a,p.d,p.b,d.a,C.c,p.c,w.a]]}),e})()},NdX7:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("cp0P"),r=n("fXoL"),l=n("sYmb"),a=n("aceb");let s=(()=>{class e{constructor(e,t){this.translateService=e,this.toastrService=t}success(e,t){Object(o.a)({msg:this.translateService.get(e),title:this.translateService.get(t)}).subscribe(e=>{this.toastrService.success(e.msg,e.title)})}show(e,t){Object(o.a)({msg:this.translateService.get(e),title:this.translateService.get(t)}).subscribe(e=>{this.toastrService.show(e.msg,e.title)})}info(e,t){Object(o.a)({msg:this.translateService.get(e),title:this.translateService.get(t)}).subscribe(e=>{this.toastrService.info(e.msg,e.title)})}warning(e,t){Object(o.a)({msg:this.translateService.get(e),title:this.translateService.get(t)}).subscribe(e=>{this.toastrService.warning(e.msg,e.title)})}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](l.d),r["\u0275\u0275inject"](a.rb))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);