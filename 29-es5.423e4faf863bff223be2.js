!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{Smt5:function(n,r,i){"use strict";i.r(r),i.d(r,"PresetModule",(function(){return w}));var o=i("ofXK"),a=i("tyNb"),s=i("cp0P"),c=(i("3Ksp"),i("wd/R")),d=i("7njR"),p=i("PNcV"),l=i("fXoL"),m=i("aceb"),f=i("sYmb");function u(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275element"](1,"nb-user",7),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("picture",n.child.photo)("name",n.child.first_name+" "+n.child.last_name)}}function v(e,t){1&e&&(l["\u0275\u0275element"](0,"nb-badge",8),l["\u0275\u0275pipe"](1,"translate")),2&e&&l["\u0275\u0275propertyInterpolate"]("text",l["\u0275\u0275pipeBind1"](1,1,"Booked"))}function b(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"nb-list-item",4),l["\u0275\u0275elementStart"](1,"div"),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"date"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](4,u,2,2,"div",5),l["\u0275\u0275template"](5,v,2,3,"nb-badge",6),l["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind2"](3,3,n.start,"HH:mm")," "),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",n.booked),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",n.booked)}}function h(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",2),l["\u0275\u0275elementStart"](1,"nb-card"),l["\u0275\u0275elementStart"](2,"nb-card-header"),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"date"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"nb-card-body"),l["\u0275\u0275elementStart"](6,"nb-list"),l["\u0275\u0275template"](7,b,6,6,"nb-list-item",3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](4,2,n.date)," "),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngForOf",r.slots[n.id])}}var g,y,S,I=[{path:"",component:(g=function(){function n(t,r){e(this,n),this.childService=t,this.appointmentService=r}var r,i,o;return r=n,(i=[{key:"ngOnInit",value:function(){var e=this;this.classroom=this.childService.getCurrentClassName(),Object(s.a)({record:this.appointmentService.GetCurrentPresetRecord(),data:this.appointmentService.GetPresetAppointmentByClassroom(this.classroom)}).subscribe((function(t){e.presetRecord=t.record,e.apnts=t.data,e.presetRecord.presetItems.forEach((function(t){t.classroom==e.classroom&&(e.presetItem=t)})),e.slots=e._generateslotsInfo(e.apnts,e.classroom)}))}},{key:"_generateslotsInfo",value:function(e,t){var n={},r=this.presetItem,i=r.duration;return r?(r.timeranges.forEach((function(t){n[t.id]=[];for(var r=c(t.startTime),o=c(t.endTime),a=function(r){var o=e.find((function(e){var t=c(e.start),n=c(e.end);return r.isSame(t,"minutes")&&r.clone().add(i,"minutes").isSame(n)})),a={child:void 0,start:r.toDate(),end:r.clone().add(i,"minutes").toDate(),booked:!1};o&&(a.child=o.child,n[t.id].booked=!0),n[t.id].push(a)},s=r.clone();s.isBefore(o,"minutes");s.add(i,"minutes"))a(s)})),console.log(n),n):{}}}])&&t(r.prototype,i),o&&t(r,o),n}(),g.\u0275fac=function(e){return new(e||g)(l["\u0275\u0275directiveInject"](p.a),l["\u0275\u0275directiveInject"](d.a))},g.\u0275cmp=l["\u0275\u0275defineComponent"]({type:g,selectors:[["ngx-preset"]],decls:8,vars:7,consts:[[1,"row"],["class","col-sm-4",4,"ngFor","ngForOf"],[1,"col-sm-4"],["style","position: relative;",4,"ngFor","ngForOf"],[2,"position","relative"],[4,"ngIf"],["status","danger","position","top right",3,"text",4,"ngIf"],[3,"picture","name"],["status","danger","position","top right",3,"text"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"nb-card"),l["\u0275\u0275elementStart"](1,"nb-card-header"),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"translate"),l["\u0275\u0275pipe"](4,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"nb-card-body"),l["\u0275\u0275elementStart"](6,"div",0),l["\u0275\u0275template"](7,h,8,4,"div",1),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate2"](" ",l["\u0275\u0275pipeBind1"](3,3,"Preset")," (",l["\u0275\u0275pipeBind1"](4,5,t.classroom)," ) "),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngForOf",t.presetItem.timeranges))},directives:[m.u,m.x,m.t,o.n,m.V,m.W,o.o,m.Bb,m.o],pipes:[f.c,o.e],styles:[""]}),g)}],x=((y=function t(){e(this,t)}).\u0275mod=l["\u0275\u0275defineNgModule"]({type:y}),y.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(e){return new(e||y)},imports:[[a.g.forChild(I)],a.g]}),y),E=i("p0MU"),w=((S=function t(){e(this,t)}).\u0275mod=l["\u0275\u0275defineNgModule"]({type:S}),S.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(e){return new(e||S)},imports:[[o.c,m.X,m.r,m.y,m.L,m.Cb,m.p,E.a,x]]}),S)}}])}();