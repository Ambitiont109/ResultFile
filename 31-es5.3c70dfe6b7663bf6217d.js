!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{CS94:function(t,r,i){"use strict";i.r(r),i.d(r,"PicturesModule",(function(){return F}));var o,a=i("ofXK"),c=i("tyNb"),l=i("PNcV"),s=i("fXoL"),d=i("aceb"),p=i("dEvH"),u=i("sYmb"),g=((o=function(){function t(n,r,i){e(this,t),this.childService=n,this.router=r,this.route=i}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.currentClassName=this.childService.getCurrentClassName(),this.childService.getChildrenByClassName(this.currentClassName).subscribe((function(t){e.children=t}))}},{key:"onSelect",value:function(e){this.router.navigate([e.id],{relativeTo:this.route})}}]),t}()).\u0275fac=function(e){return new(e||o)(s["\u0275\u0275directiveInject"](l.a),s["\u0275\u0275directiveInject"](c.c),s["\u0275\u0275directiveInject"](c.a))},o.\u0275cmp=s["\u0275\u0275defineComponent"]({type:o,selectors:[["ngx-pictures"]],decls:7,vars:4,consts:[[1,"d-flex","align-items-center","justify-content-between"],[3,"data","onselect"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275text"](3),s["\u0275\u0275pipe"](4,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"nb-card-body"),s["\u0275\u0275elementStart"](6,"ngx-child-list",1),s["\u0275\u0275listener"]("onselect",(function(e){return t.onSelect(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](4,2,"Select Child")," "),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("data",t.children))},directives:[d.u,d.x,d.t,p.a],pipes:[u.c],styles:[""]}),o),m=i("eIep"),f=i("EZvT"),h=i("m3o8"),v=function(e){return{"background-image":e}};function b(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",3),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](n);var e=t.index;return s["\u0275\u0275nextContext"]().open(e)})),s["\u0275\u0275element"](1,"div",4),s["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngStyle",s["\u0275\u0275pureFunction1"](1,v,"url("+r.image+")"))}}var x,y=function(){return{"background-image":"url(/assets/images/icon-add.png)"}},w=((x=function(){function t(n,r,i,o){e(this,t),this.route=n,this.router=r,this._lightbox=i,this.pictureService=o}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.pipe(Object(m.a)((function(t){return e.childId=Number(t.get("childId")),e.pictureService.getPicturesOfChild(e.childId)}))).subscribe((function(t){e.pictures=t.pictures,e._album=[],e.pictures.forEach((function(t){e._album.push({src:t.image})}))}))}},{key:"add",value:function(){this.router.navigate(["add"],{relativeTo:this.route})}},{key:"back",value:function(){this.router.navigate([".."],{relativeTo:this.route})}},{key:"open",value:function(e){this._lightbox.open(this._album,e,{centerVertically:!0,fitImageInViewPort:!1})}}]),t}()).\u0275fac=function(e){return new(e||x)(s["\u0275\u0275directiveInject"](c.a),s["\u0275\u0275directiveInject"](c.c),s["\u0275\u0275directiveInject"](h.Lightbox),s["\u0275\u0275directiveInject"](f.a))},x.\u0275cmp=s["\u0275\u0275defineComponent"]({type:x,selectors:[["ngx-picture-list"]],decls:12,vars:9,consts:[["nbButton","","ghost","",3,"nbTooltip","click"],["icon","arrow-back-outline",2,"color","white"],[1,"row"],[1,"item","col-sm-2","mb-4",3,"click"],[1,"img-content",3,"ngStyle"],["class","item col-sm-2 mb-4",3,"click",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"button",0),s["\u0275\u0275listener"]("click",(function(){return t.back()})),s["\u0275\u0275pipe"](3,"translate"),s["\u0275\u0275elementStart"](4,"nb-icon",1),s["\u0275\u0275text"](5,"arrow-back-outline"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](6),s["\u0275\u0275pipe"](7,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"nb-card-body",2),s["\u0275\u0275elementStart"](9,"div",3),s["\u0275\u0275listener"]("click",(function(){return t.add()})),s["\u0275\u0275element"](10,"div",4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](11,b,2,3,"div",5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](2),s["\u0275\u0275propertyInterpolate"]("nbTooltip",s["\u0275\u0275pipeBind1"](3,4,"Back")),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](7,6,"Pictures")," "),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngStyle",s["\u0275\u0275pureFunction0"](8,y)),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.pictures))},directives:[d.u,d.x,d.q,d.ub,d.I,d.t,a.p,a.n],pipes:[u.c],styles:[".img-content[_ngcontent-%COMP%]{width:100%;position:relative;padding-top:100%;background-size:cover;background-repeat:no-repeat;border-radius:5px;box-shadow:0 0 5px .5px #fff}.item[_ngcontent-%COMP%]{cursor:pointer}"]}),x),C=i("/aQt"),k=i("AytR"),S=i("EwH2"),I=i("kvL/");function O(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"ngx-dropzone-image-preview",5),s["\u0275\u0275listener"]("removed",(function(){s["\u0275\u0275restoreView"](n);var e=t.$implicit;return s["\u0275\u0275nextContext"]().onRemove(e)})),s["\u0275\u0275elementStart"](1,"ngx-dropzone-label"),s["\u0275\u0275elementStart"](2,"span",6),s["\u0275\u0275text"](3),s["\u0275\u0275pipe"](4,"stateToString"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](5,"ngx-file-upload-ui--progressbar-circle",7),s["\u0275\u0275elementStart"](6,"span",8),s["\u0275\u0275text"](7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;s["\u0275\u0275property"]("file",r.data.raw)("removable",!0),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate2"](" ",r.data.state," State: ",s["\u0275\u0275pipeBind1"](4,7,r.data.state)," "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("progress",r.data.progress)("parts",12),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",r.data.name," ")}}var P,_,M,E=[{path:"",component:g},{path:":childId/add",component:(P=function(){function t(n,r,i){e(this,t),this.uploadFactory=n,this.router=r,this.route=i,this.uploads=[],this.storage=new C.d({concurrentUploads:2,autoStart:!1,removeCompleted:1e3}),this.uploadOptions={url:"".concat(k.a.API_URL,"/child/").concat(this.childId,"/upload_picture/"),formData:{enabled:!0,name:"image"}}}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.subscribe((function(t){e.childId=Number(t.get("childId")),e.uploadOptions.url="".concat(k.a.API_URL,"/child/").concat(e.childId,"/upload_picture/")})),this.storage.change().subscribe((function(t){e.uploads=t,e.uploads.forEach((function(e){}))}))}},{key:"onSelect",value:function(e){console.log("Select",e);var t=this.uploadFactory.createUploadRequest(e.addedFiles,this.uploadOptions);t.forEach((function(e){e.change.subscribe((function(e){console.log(e.response.errors)}))})),this.storage.add(t)}},{key:"onRemove",value:function(e){this.storage.remove(e)}},{key:"back",value:function(){this.router.navigate([".."],{relativeTo:this.route})}},{key:"startUploads",value:function(){this.storage.startAll()}}]),t}(),P.\u0275fac=function(e){return new(e||P)(s["\u0275\u0275directiveInject"](C.b),s["\u0275\u0275directiveInject"](c.c),s["\u0275\u0275directiveInject"](c.a))},P.\u0275cmp=s["\u0275\u0275defineComponent"]({type:P,selectors:[["ngx-picture-add"]],decls:15,vars:12,consts:[["nbButton","","ghost","",3,"nbTooltip","click"],["icon","arrow-back-outline",2,"color","white"],[3,"storage"],[3,"accept","change"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngFor","ngForOf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed"],[1,"state"],[3,"progress","parts"],[1,"label"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"button",0),s["\u0275\u0275listener"]("click",(function(){return t.back()})),s["\u0275\u0275pipe"](3,"translate"),s["\u0275\u0275elementStart"](4,"nb-icon",1),s["\u0275\u0275text"](5,"arrow-back-outline"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](6),s["\u0275\u0275pipe"](7,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"nb-card-body"),s["\u0275\u0275element"](9,"ngx-file-upload-ui--toolbar",2),s["\u0275\u0275elementStart"](10,"ngx-dropzone",3),s["\u0275\u0275listener"]("change",(function(e){return t.onSelect(e)})),s["\u0275\u0275elementStart"](11,"ngx-dropzone-label"),s["\u0275\u0275text"](12),s["\u0275\u0275pipe"](13,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](14,O,8,9,"ngx-dropzone-image-preview",4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](2),s["\u0275\u0275propertyInterpolate"]("nbTooltip",s["\u0275\u0275pipeBind1"](3,6,"Back")),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](7,8,"Upload Pictures")," "),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("storage",t.storage),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("accept","image/*"),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](13,10,"Drop or Browse")),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngForOf",t.uploads))},directives:[d.u,d.x,d.q,d.ub,d.I,d.t,S.i,I.a,I.d,a.n,I.b,S.f],pipes:[u.c,S.h],styles:["[_nghost-%COMP%]   ngx-dropzone[_ngcontent-%COMP%]{border-style:solid;border-width:0 2px 2px;border-radius:0;padding:.2rem .5rem .2rem 0;min-height:400px;flex-wrap:wrap;align-items:baseline}[_nghost-%COMP%]   ngx-dropzone-image-preview[_ngcontent-%COMP%]{height:100%;position:relative;margin:0 .5rem 0 0}[_nghost-%COMP%]   ngx-dropzone-image-preview[_ngcontent-%COMP%]     img{min-width:100px}[_nghost-%COMP%]   ngx-dropzone-label[_ngcontent-%COMP%]{top:0;right:0;left:0;bottom:0;display:flex;flex-direction:column;justify-content:space-between}[_nghost-%COMP%]   ngx-dropzone-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;padding:0 .3rem;text-align:left}[_nghost-%COMP%]   ngx-dropzone-label[_ngcontent-%COMP%]   span.label[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   ngx-file-upload-ui--progressbar-circle[_ngcontent-%COMP%]     svg{opacity:.8;height:72px;width:72px}[_nghost-%COMP%]   ngx-file-upload-ui--progressbar-circle[_ngcontent-%COMP%]     svg circle{stroke:#807f7f;stroke-width:.5rem}[_nghost-%COMP%]   ngx-file-upload-ui--progressbar-circle[_ngcontent-%COMP%]     svg circle.progress{stroke-width:.5rem;stroke:#fff}[_nghost-%COMP%]   ngx-file-upload-ui--progressbar-circle[_ngcontent-%COMP%]     span{font-size:.7rem;color:#fff}[_nghost-%COMP%]     ngx-dropzone-remove-badge{z-index:10}"]}),P)},{path:":childId",component:w}],j=((_=function t(){e(this,t)}).\u0275mod=s["\u0275\u0275defineNgModule"]({type:_}),_.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||_)},imports:[[c.g.forChild(E)],c.g]}),_),z=i("Rqib"),B=i("p0MU"),F=((M=function t(){e(this,t)}).\u0275mod=s["\u0275\u0275defineNgModule"]({type:M}),M.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||M)},imports:[[a.c,j,d.y,z.a,d.r,d.K,d.vb,d.y,d.xb,B.a,I.c,C.a,S.a,S.d,S.e]]}),M)}}])}();