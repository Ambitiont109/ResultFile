(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{ZaHA:function(e,t,n){"use strict";n.r(t),n.d(t,"PicturesModule",(function(){return _}));var r=n("ofXK"),o=n("tyNb"),i=n("PNcV"),a=n("fXoL"),c=n("aceb"),s=n("dEvH");let l=(()=>{class e{constructor(e,t,n){this.childService=e,this.router=t,this.route=n}ngOnInit(){this.currentClassName=this.childService.getCurrentClassName(),this.childService.getChildrenByClassName(this.currentClassName).subscribe(e=>{this.children=e})}onSelect(e){this.router.navigate([e.id],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](i.a),a["\u0275\u0275directiveInject"](o.c),a["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-pictures"]],decls:6,vars:1,consts:[[1,"d-flex","align-items-center","justify-content-between"],[3,"data","onselect"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"nb-card"),a["\u0275\u0275elementStart"](1,"nb-card-header"),a["\u0275\u0275elementStart"](2,"div",0),a["\u0275\u0275text"](3," Select Child "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"nb-card-body"),a["\u0275\u0275elementStart"](5,"ngx-child-list",1),a["\u0275\u0275listener"]("onselect",(function(e){return t.onSelect(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("data",t.children))},directives:[c.u,c.x,c.t,s.a],styles:[""]}),e})();var d=n("eIep"),p=n("EZvT"),u=n("m3o8"),g=n("sYmb");const m=function(e){return{"background-image":e}};function h(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",3),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](e);const n=t.index;return a["\u0275\u0275nextContext"]().open(n)})),a["\u0275\u0275element"](1,"div",4),a["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](1,m,"url("+e.image+")"))}}const b=function(){return{"background-image":"url(/assets/images/icon-add.png)"}};let f=(()=>{class e{constructor(e,t,n,r){this.route=e,this.router=t,this._lightbox=n,this.pictureService=r}ngOnInit(){this.route.paramMap.pipe(Object(d.a)(e=>(this.childId=Number(e.get("childId")),this.pictureService.getPicturesOfChild(this.childId)))).subscribe(e=>{this.pictures=e.pictures,this._album=[],this.pictures.forEach(e=>{this._album.push({src:e.image})})})}add(){this.router.navigate(["add"],{relativeTo:this.route})}back(){this.router.navigate([".."],{relativeTo:this.route})}open(e){this._lightbox.open(this._album,e,{centerVertically:!0,fitImageInViewPort:!1})}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](o.c),a["\u0275\u0275directiveInject"](u.Lightbox),a["\u0275\u0275directiveInject"](p.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-picture-list"]],decls:12,vars:9,consts:[["nbButton","","ghost","",3,"nbTooltip","click"],["icon","arrow-back-outline",2,"color","white"],[1,"row"],[1,"item","col-sm-2","mb-4",3,"click"],[1,"img-content",3,"ngStyle"],["class","item col-sm-2 mb-4",3,"click",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"nb-card"),a["\u0275\u0275elementStart"](1,"nb-card-header"),a["\u0275\u0275elementStart"](2,"button",0),a["\u0275\u0275listener"]("click",(function(){return t.back()})),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementStart"](4,"nb-icon",1),a["\u0275\u0275text"](5,"arrow-back-outline"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](6),a["\u0275\u0275pipe"](7,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"nb-card-body",2),a["\u0275\u0275elementStart"](9,"div",3),a["\u0275\u0275listener"]("click",(function(){return t.add()})),a["\u0275\u0275element"](10,"div",4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](11,h,2,3,"div",5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("nbTooltip",a["\u0275\u0275pipeBind1"](3,4,"Back")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](7,6,"Pictures")," "),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction0"](8,b)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.pictures))},directives:[c.u,c.x,c.q,c.ub,c.I,c.t,r.p,r.n],pipes:[g.c],styles:[".img-content[_ngcontent-%COMP%]{width:100%;position:relative;padding-top:100%;background-size:cover;background-repeat:no-repeat;border-radius:5px;box-shadow:0 0 5px .5px #fff}.item[_ngcontent-%COMP%]{cursor:pointer}"]}),e})();var v=n("/aQt"),x=n("AytR"),w=n("EwH2"),C=n("kvL/");function y(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"ngx-dropzone-image-preview",5),a["\u0275\u0275listener"]("removed",(function(){a["\u0275\u0275restoreView"](e);const n=t.$implicit;return a["\u0275\u0275nextContext"]().onRemove(n)}))("change",(function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().onDropzoneChange(t)})),a["\u0275\u0275elementStart"](1,"ngx-dropzone-label"),a["\u0275\u0275elementStart"](2,"span",6),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"stateToString"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"ngx-file-upload-ui--progressbar-circle",7),a["\u0275\u0275elementStart"](6,"span",8),a["\u0275\u0275text"](7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;a["\u0275\u0275property"]("file",e.data.raw)("removable",!0),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate2"](" ",e.data.state," State: ",a["\u0275\u0275pipeBind1"](4,7,e.data.state)," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("progress",e.data.progress)("parts",12),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",e.data.name," ")}}const S=[{path:"",component:l},{path:":childId/add",component:(()=>{class e{constructor(e,t,n){this.uploadFactory=e,this.router=t,this.route=n,this.uploads=[],this.storage=new v.d({concurrentUploads:2,autoStart:!1,removeCompleted:1e3}),this.uploadOptions={url:`${x.a.API_URL}/child/${this.childId}/upload_picture/`,formData:{enabled:!0,name:"image"}}}ngOnInit(){this.route.paramMap.subscribe(e=>{this.childId=Number(e.get("childId")),this.uploadOptions.url=`${x.a.API_URL}/child/${this.childId}/upload_picture/`}),this.storage.change().subscribe(e=>{this.uploads=e,this.uploads.forEach(e=>{})})}onSelect(e){console.log("Select",e);const t=this.uploadFactory.createUploadRequest(e.addedFiles,this.uploadOptions);t.forEach(e=>{e.change.subscribe(e=>{console.log(e.response.errors)})}),this.storage.add(t)}onRemove(e){this.storage.remove(e)}onDropzoneChange(e){console.log(e)}back(){this.router.navigate([".."],{relativeTo:this.route})}startUploads(){this.storage.startAll()}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](v.b),a["\u0275\u0275directiveInject"](o.c),a["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-picture-add"]],decls:15,vars:12,consts:[["nbButton","","ghost","",3,"nbTooltip","click"],["icon","arrow-back-outline",2,"color","white"],[3,"storage"],[3,"accept","change"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed","change",4,"ngFor","ngForOf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed","change"],[1,"state"],[3,"progress","parts"],[1,"label"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"nb-card"),a["\u0275\u0275elementStart"](1,"nb-card-header"),a["\u0275\u0275elementStart"](2,"button",0),a["\u0275\u0275listener"]("click",(function(){return t.back()})),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementStart"](4,"nb-icon",1),a["\u0275\u0275text"](5,"arrow-back-outline"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](6),a["\u0275\u0275pipe"](7,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"nb-card-body"),a["\u0275\u0275element"](9,"ngx-file-upload-ui--toolbar",2),a["\u0275\u0275elementStart"](10,"ngx-dropzone",3),a["\u0275\u0275listener"]("change",(function(e){return t.onSelect(e)})),a["\u0275\u0275elementStart"](11,"ngx-dropzone-label"),a["\u0275\u0275text"](12),a["\u0275\u0275pipe"](13,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](14,y,8,9,"ngx-dropzone-image-preview",4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("nbTooltip",a["\u0275\u0275pipeBind1"](3,6,"Back")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](7,8,"Upload Pictures")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("storage",t.storage),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("accept","image/*"),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](13,10,"Drop or Browse")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.uploads))},directives:[c.u,c.x,c.q,c.ub,c.I,c.t,w.i,C.a,C.d,r.n,C.b,w.f],pipes:[g.c,w.h],styles:["[_nghost-%COMP%]   ngx-dropzone[_ngcontent-%COMP%]{border-style:solid;border-width:0 2px 2px;border-radius:0;padding:.2rem .5rem .2rem 0;min-height:400px;flex-wrap:wrap;align-items:baseline}[_nghost-%COMP%]   ngx-dropzone-image-preview[_ngcontent-%COMP%]{height:100%;position:relative;margin:0 .5rem 0 0}[_nghost-%COMP%]   ngx-dropzone-image-preview[_ngcontent-%COMP%]     img{min-width:100px}[_nghost-%COMP%]   ngx-dropzone-label[_ngcontent-%COMP%]{top:0;right:0;left:0;bottom:0;display:flex;flex-direction:column;justify-content:space-between}[_nghost-%COMP%]   ngx-dropzone-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;padding:0 .3rem;text-align:left}[_nghost-%COMP%]   ngx-dropzone-label[_ngcontent-%COMP%]   span.label[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   ngx-file-upload-ui--progressbar-circle[_ngcontent-%COMP%]     svg{opacity:.8;height:72px;width:72px}[_nghost-%COMP%]   ngx-file-upload-ui--progressbar-circle[_ngcontent-%COMP%]     svg circle{stroke:#807f7f;stroke-width:.5rem}[_nghost-%COMP%]   ngx-file-upload-ui--progressbar-circle[_ngcontent-%COMP%]     svg circle.progress{stroke-width:.5rem;stroke:#fff}[_nghost-%COMP%]   ngx-file-upload-ui--progressbar-circle[_ngcontent-%COMP%]     span{font-size:.7rem;color:#fff}[_nghost-%COMP%]     ngx-dropzone-remove-badge{z-index:10}"]}),e})()},{path:":childId",component:f}];let I=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.g.forChild(S)],o.g]}),e})();var O=n("Rqib"),P=n("p0MU");let _=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,I,c.y,O.a,c.r,c.K,c.vb,c.y,c.xb,P.a,C.c,v.a,w.a,w.d,w.e]]}),e})()}}]);